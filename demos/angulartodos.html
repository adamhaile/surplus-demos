<!doctype html>
<title>Minimalist TodoMVC App in S.js</title>
<script type="text/javascript-htmlliterals">
var ToDo = t => ({              // our todo model
        text: S.data(t.text),   // props are data signals
        done: S.data(t.done) 
    }),
    todos = S.array([]),        // our array of todos
    todoText = S.data(""),      // text for new todos
    addTodo = e => {            // add a todo with text
        todos.push(ToDo({ text: todoText(), done: false }));
        todoText("");
        e.preventDefault();
    },
    remaining = todos.filter(t => !t.done()),
    archive = e => { todos(remaining()); e.preventDefault(); }
    view =                      // declarative view
        <div>
            <span>@remaining().length of @todos().length remaining</span>
            [ <a href="" onclick=archive>archive</a> ]
            <ul class="unstyled">
                @todos().map(todo => 
                    <li>
                        <input type="checkbox" @Html.data(todo.done)/>
                        <span className=("done-" + todo.done())>@todo.text()</span>
                    </li>
                )
            </ul>
            <form onsubmit=addTodo>
                <input type="text" @Html.data(todoText) size="30"
                    placeholder="add new todo here"/>
                <input class="btn-primary" type="submit" value="add"/>
            </form>
        </div>;

    document.body.appendChild(view);
</script>
<script src="../dist/surplus.js"></script>
