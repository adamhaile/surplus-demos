!function(e){var t={};e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t.S:"function"==typeof define?define([],function(){return t.S}):this.S=t.S}(function(e){"use strict";e("graph",[],function(){function e(){this.count=1,this.target=null,this.deferred=[]}function t(e){this.id=e.count++,this.lineage=e.target?e.target.lineage:[],this.updates=[]}function n(e,t,n){var r,i,o;for(this.lineage=n.target?n.target.lineage.slice(0):[],this.lineage.push(this),this.scheduler=t.update,this.listening=!0,this.pinning=t.pinning||!1,this.locked=!0,this.gen=1,this.dependencies=[],this.dependenciesIndex={},this.cleanups=[],this.finalizers=[],this.updaters=new Array(this.lineage.length+1),this.updaters[this.lineage.length]=e,r=this.lineage.length-1;r>=0;r--)i=this.lineage[r],i.scheduler&&(e=i.scheduler(e)),this.updaters[r]=e;if(t.sources){o=n.target,n.target=this,this.locked=!1;try{for(r=0;r<t.sources.length;r++)t.sources[r]()}finally{this.locked=!0,n.target=o}this.listening=!1}}function r(e,t){this.active=!0,this.gen=e.gen,this.updates=t.updates,this.offset=t.updates.length;for(var n=0,r=Math.min(e.lineage.length,t.lineage.length);r>n&&e.lineage[n]===t.lineage[n];n++);this.update=e.updaters[n],this.updates.push(this.update),e.dependencies.push(this),e.dependenciesIndex[t.id]=this}return e.prototype={reportReference:function(e){this.target&&this.target.addSource(e)},reportFormula:function(e,t){this.target&&this.target.addSubformula(e,t)},runDeferred:function(){if(!this.target)for(;0!==this.deferred.length;)this.deferred.shift()()}},t.prototype={propagate:function(){var e,t,n=this.updates,r=n.length;for(e=0;r>e;e++)t=n[e],t&&t()},dispose:function(){this.lineage=null,this.updates.length=0}},n.prototype={beginUpdate:function(){this.cleanup(),this.gen++},endUpdate:function(){if(this.listening){var e,t;for(e=0;e<this.dependencies.length;e++)t=this.dependencies[e],t.active&&t.gen<this.gen&&t.deactivate()}},addSubformula:function(e,t){if(this.locked)throw new Error("Cannot create a new subformula except while updating the parent");(t||this.pinning?this.finalizers:this.cleanups).push(e)},addSource:function(e){if(this.listening&&!this.locked){var t=this.dependenciesIndex[e.id];t?t.activate(this.gen,e):new r(this,e)}},cleanup:function(){for(var e=0;e<this.cleanups.length;e++)this.cleanups[e]();this.cleanups=[]},dispose:function(){var e;for(this.cleanup(),e=0;e<this.finalizers.length;e++)this.finalizers[e]();for(e=this.dependencies.length-1;e>=0;e--)this.dependencies[e].deactivate();this.lineage=null,this.scheduler=null,this.updaters=null,this.cleanups=null,this.finalizers=null,this.dependencies=null,this.dependenciesIndex=null}},r.prototype={activate:function(e,t){this.active||(this.active=!0,this.updates=t.updates,this.updates[this.offset]=this.update),this.gen=e},deactivate:function(){this.active&&(this.updates[this.offset]=null,this.updates=null),this.active=!1}},{Overseer:e,Source:t,Target:n,Dependency:r}}),e("core",["graph"],function(e){function t(t){function n(e){return arguments.length>0?(t=e,r.propagate(),f.runDeferred()):f.reportReference(r),t}var r=new e.Source(f);return n.toJSON=i,n}function n(){this.sources=null,this.pin=!1,this.update=null,this.init=null}function r(t,n){function r(){return c&&f.reportReference(c),s}function o(){if(!a&&l){a=!0;var e;e=f.target,f.target=l,l.beginUpdate(),l.locked=!1;try{s=t(),l&&(l.locked=!0),c&&c.propagate()}finally{a=!1,l&&(l.locked=!0),f.target=e}l&&l.endUpdate()}}function u(){c&&(c.dispose(),l.dispose()),c=l=t=s=void 0}var s,a,c=new e.Source(f),l=new e.Target(o,n,f);return f.reportFormula(u,n.pin),r.dispose=u,r.toJSON=i,(n.init?n.init(o):o)(),f.runDeferred(),r}function i(){return this()}function o(e){if(!f.target||!f.target.listening)return e();f.target.listening=!1;try{return e()}finally{f.target.listening=!0}}function u(e){if(!f.target||f.target.pinning)return e();f.target.pinning=!0;try{return e()}finally{f.target.pinning=!1}}function s(e){f.target?f.deferred.push(e):e()}function a(e){if(!f.target)throw new Error("S.cleanup() must be called from within an S.formula.  Cannot call it at toplevel.");f.target.cleanups.push(e)}function c(e){if(!f.target)throw new Error("S.finalize() must be called from within an S.formula.  Cannot call it at toplevel.");f.target.finalizers.push(e)}var f=new e.Overseer;return{data:t,FormulaOptions:n,formula:r,defer:s,peek:o,pin:u,cleanup:a,finalize:c}}),e("schedulers",["core"],function(e){function t(){return function(){}}function n(e){return function(t){var n=!1;return function(){n||(n=!0,e(function(){n=!1,t()}))}}}function r(){return n(e.defer)}function i(e){return function(t){var n=0,r=!1;return function(){if(!r){var i=Date.now();i-n>e?(n=i,t()):(r=!0,setTimeout(function(){n=Date.now(),r=!1,t()},e-(i-n)))}}}}function o(e){return function(t){var n=0,r=0;return function(){var i=Date.now();i>n&&(n=i,r&&clearTimeout(r),r=setTimeout(function(){t()},e))}}}function u(){function e(e){n.push(e)}function t(){for(var e=0;e<n.length;e++)n[e]();n=[]}var n=[];return e.go=t,e}function s(e){return function(t){for(var n=0;n<e.length;n++)if(void 0===e[n]())return;t()}}return{stop:t,pause:n,defer:r,throttle:i,debounce:o,stopsign:u,when:s}}),e("options",["core","schedulers"],function(e,t){function n(){this.options=new e.FormulaOptions}function r(e,t){return t?function(){return e(t())}:e}function i(e,t){return e?e.concat(t):t}function o(e,t){e.options.update=r(t,e.options.update)}function u(e,t){e.options.init=r(t,e.options.init)}return n.prototype={on:function(e){return e=e?Array.isArray(e)?e:[e]:[],this.options.sources=i(this.options.sources,e),this},once:function(){return this.options.sources=[],this},pin:function(){return this.options.pin=!0,this},when:function(e){e=e?Array.isArray(e)?e:[e]:[],this.options.sources=i(this.options.sources,e);var n=t.pause(t.when(e));return u(this,n),o(this,n),this}},"defer throttle debounce pause".split(" ").map(function(e){n.prototype[e]=function(n){return o(this,t[e](n)),this}}),{FormulaOptionsBuilder:n}}),e("misc",[],function(){function e(e,t){return function(n){return 0!==arguments.length&&t(n),e()}}return{proxy:e}}),e("S",["core","options","schedulers","misc"],function(e,t,n,r){function i(t){var n,r;return arguments.length>1&&(n=t,r=Array.prototype.slice.call(arguments,1),t=function(){return n.apply(null,r)}),e.formula(t,new e.FormulaOptions)}return i.data=e.data,i.peek=e.peek,i.cleanup=e.cleanup,i.finalize=e.finalize,"on once when defer throttle debounce pause".split(" ").map(function(e){i[e]=function(n){return(new t.FormulaOptionsBuilder)[e](n)}}),i.pin=function(n){return 0===arguments.length?(new t.FormulaOptionsBuilder).pin():void e.pin(n)},t.FormulaOptionsBuilder.prototype.S=function(t){var n,r;return arguments.length>1&&(n=t,r=Array.prototype.slice.call(arguments,1),t=function(){return n.apply(null,r)}),e.formula(t,this.options)},i.stopsign=n.stopsign,i.proxy=r.proxy,i})}),function(e){"object"==typeof exports?e(require("S")):"function"==typeof define?define(["S"],e):e(S)}(function(e){"use strict";function t(t){if(!Array.isArray(t))throw new Error("S.array must be initialized with an array");var r=e.data(t);return r.pop=b,r.push=w,r.shift=E,r.splice=k,r.unshift=S,r.remove=x,r.removeAll=N,n(r)}function n(e){return e.concat=d,e.every=g,e.filter=l,e.find=s,e.forEach=i,e.includes=a,e.map=u,e.sort=c,e.reduce=h,e.reduceRight=p,e.reverse=m,e.slice=y,e.some=v,e.mapS=r,e.combine=o,e.orderBy=f,e.defer=L,e.throttle=T,e.debounce=A,e.pause=C,e}function r(t,r,i){var o=this,u=[],s=[],a=0,c=e.on(o).S(function(){var n,c,f,l,d,h=o(),p=h.length,g=new Array(p),v=[],m=[];e:for(n=0,f=0;a>n;n++){for(l=s[n],c=0;p>c;c++,f=(f+1)%p)if(u[n]===h[f]&&!g.hasOwnProperty(f)){g[f]=l,n!==f&&(v.push(n),m.push(f)),f=(f+1)%p;continue e}r&&r(l,n),t&&l.dispose()}i&&v.length&&i(v,m);for(var n=0;p>n;n++)g.hasOwnProperty(n)?s[n]=g[n]:(l=h[n],t?(d=function(e,n){return function(){return t(e,n)}}(l,n),s[n]=e.pin().S(d)):s[n]=l);return a=s.length=p,u=h.slice(),s});return n(c)}function i(t,r,i){var o=this,u=[],s=0,a=e.on(o).S(function(){var n,a,c,f,l=o(),d=l.length,h=new Array(d),p=[],g=[];e:for(n=0,c=0;s>n;n++){for(f=u[n],a=0;d>a;a++,c=(c+1)%d)if(f===l[c]&&!h[c]){h[c]=!0,n!==c&&(p.push(n),g.push(c)),c=(c+1)%d;continue e}r&&r(f,n)}return i&&p.length&&i(p,g),t&&e.pin(function(){for(var e=0;d>e;e++)h[e]||t(l[e],e)}),s=d,u=l.slice()});return n(a)}function o(){var t=this;return n(e(function(){for(var e=t(),n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r]();return n}))}function u(e,t,n){var r=this.mapS(e,t,n);return e?r.combine():r}function s(t){var r=this;return n(e(function(){var e,n,i=r();for(e=0;e<i.length;e++)if(n=i[e],t(n))return n;return void 0}))}function a(t){var r=this;return n(e(function(){for(var e=r(),n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}))}function c(t){var r=this;return n(e(function(){var e=r().slice(0);return t?e.sort(t):e.sort(),e}))}function f(t){var r,i=this;return"function"!=typeof t&&(r=t,t=function(e){return e[r]}),n(e(function(){var e=i().slice(0);return e.sort(function(e,n){return e=t(e),n=t(n),n>e?-1:e>n?1:0}),e}))}function l(t){var r=this;return n(e(function(){var e,n,i=r(),o=[];for(e=0;e<i.length;e++)n=i[e],t(n)&&o.push(n);return o}))}function d(){var t=this,r=Array.prototype.slice.call(arguments);return n(e(function(){for(var e=t(),n=0;n<r.length;n++)e=e.concat(r[n]());return e}))}function h(t,r){var i=this;return n(e(function(){for(var e=i(),n=r,o=0;o<e.length;o++)n=t(n,e[o],o,e);return n}))}function p(t,r){var i=this;return n(e(function(){for(var e=i(),n=r,o=e.length-1;o>=0;o--)n=t(n,e[o],o,e);return n}))}function g(t){var r=this;return n(e(function(){for(var e=r(),n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0}))}function v(t){var r=this;return n(e(function(){var e=r();if(void 0===t)return 0!==e.length;for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}))}function m(){var t=this;return n(e(function(){var e=t().slice(0);return e.reverse(),e}))}function y(t,r){var i=this;return n(e(function(){return i().slice(t,r)}))}function w(t){var n=e.peek(this);return n.push(t),this(n),this}function b(){var t=e.peek(this),n=t.pop();return this(t),n}function S(t){var n=e.peek(this);return n.unshift(t),this(n),this}function E(){var t=e.peek(this),n=t.shift();return this(t),n}function k(){var t=e.peek(this);return Array.prototype.splice.apply(t,arguments),this(t),this}function x(t){for(var n=e.peek(this),r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}return this(n),this}function N(t){for(var n=e.peek(this),r=0;r<n.length;)n[r]===t?n.splice(r,1):r++;return this(n),this}function L(){return n(e.defer().S(this))}function T(t){return n(e.throttle(t).S(this))}function A(t){return n(e.debounce(t).S(this))}function C(t){return n(e.pause(t).S(this))}e.array=t}),function(e){var t={},n="Html";e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t[n]:"function"==typeof define?define([],function(){return t[n]}):this[n]=t[n]}(function(e){"use strict";e("domlib",[],function(){return{addEventListener:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)},classListContains:function(e,t){return e.classList.contains(t)},classListAdd:function(e,t){return e.classList.add(t)},classListRemove:function(e,t){return e.classList.remove(t)}}}),e("parse",[],function(){function e(e){var r=t.exec(e),i=r&&n[r[1].toLowerCase()]||"div";return"svg"===i?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)}var t=/<(\w+)/,n={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html",svg:"svg",g:"svg",circle:"svg",elipse:"svg",rect:"svg",text:"svg",polyline:"svg",polygon:"svg",line:"svg"};return function(t){var n,r,i=e(t);if(i.innerHTML=t,n=i.childNodes.length,0===n){if(""===t)return document.createTextNode("");throw new Error("HTML parse failed for: "+t)}if(1===n)return i.childNodes[0];for(r=document.createDocumentFragment();0!==i.childNodes.length;)r.appendChild(i.childNodes[0]);return r.startNode=r.firstChild,r.endNode=r.lastChild,r}}),e("cachedParse",["parse"],function(e){var t={},n=11;return function(r,i){var o,u=t[r];return void 0===u&&(u=e(i),t[r]=u),o=u.cloneNode(!0),o.nodeType===n&&(o.startNode=o.firstChild,o.endNode=o.lastChild),o}}),e("Html",["parse","cachedParse","domlib"],function(e,t,n){function r(n,r){void 0===n.nodeType&&(n=r?t(n,r):e(n)),this.node=n}return r.prototype={child:function i(e,t){var n,i,o=this.node.childNodes,u=e.length,s=new Array(u);if(void 0===o)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(n=0;u>n;n++){if(i=o[e[n]],!i)throw new Error("Node ``"+this.node+"'' does not have a child at index "+n+".");s[n]=new r(i)}return t(s),this},property:function(e){return e(this.node),this}},r.addDirective=function(e,t){r.prototype[e]=function(e){return r.runDirective(t,this.node,e),this}},r.runDirective=function(e,t,n){n(e(t))},r.cleanup=function(){},r.domlib=n,r}),e("directives.attr",["Html"],function(e){e.addDirective("attr",function(e){return function(t,n){e.setAttribute(t,n)}})}),e("directives.class",["Html"],function(e){e.addDirective("class",function(t){if(void 0===t.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+t+"'' does not. Perhaps you applied it to the wrong node?");return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=e.domlib.classListContains(t,n),u=r&&e.domlib.classListContains(t,r);i?(o||e.domlib.classListAdd(t,n),r&&u&&e.domlib.classListRemove(t,r)):(o&&e.domlib.classListRemove(t,n),r&&!u&&e.domlib.classListAdd(t,r))}})}),e("directives.focus",["Html"],function(e){e.addDirective("focus",function(e){return function(t){t?e.focus():e.blur()}})}),e("directives.insert",["Html"],function(e){var t=11;e.addDirective("insert",function(e){function n(e){var n=c.nextSibling;null===e||void 0===e||(e.nodeType===t?0===e.childNodes.length&&e.startNode&&e.endNode?i(e.startNode,e.endNode):(s.insertBefore(e,n),c=n.previousSibling):e.nodeType?(n!==e&&s.insertBefore(e,n),c=e):Array.isArray(e)?r(e):(e=e.toString(),c=3!==n.nodeType||n.data!==e?s.insertBefore(document.createTextNode(e),n):n))}function r(t){var r,i,o;for(r=0,i=t.length;i>r;r++)n(t[r]),o&&3==o.nodeType&&o.nextSibling!==e&&3===o.nextSibling.nodeType&&s.insertBefore(document.createTextNode(" "),o.nextSibling),o=e.previousSibling}function i(e,t){var n,r=c.nextSibling;if(e.parentNode!==t.parentNode)throw new Error("Range must be siblings");do{if(n=e,e=e.nextSibling,!n)throw new Error("end must come after head");n!==r?s.insertBefore(n,r):r=r.nextSibling}while(n!==t);c=t}function o(e,t){if(e!==t)for(var n=e.nextSibling;n!==t;)s.removeChild(n),n=e.nextSibling}function u(e){return s.insertBefore(document.createTextNode(""),e)}var s,a,c;return function(t){if(s=e.parentNode,!s)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+e+"'' is currently unattached to a parent.");if(a){if(a.parentNode!==s)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.")}else a=u(e);c=a,n(t),o(c,e)}})}),e("directives.onkey",["Html"],function(e){e.addDirective("onkey",function(n){return function(r,i,o){function u(e){return e.keyCode===s&&o(),!0}arguments.length<3&&(o=i,i="down");var s=t[r.toLowerCase()];if(void 0===s)throw new Error("@onkey: unrecognized key identifier '"+r+"'");if("function"!=typeof o)throw new Error("@onkey: must supply a function to call when the key is entered");e.domlib.addEventListener(n,"key"+i,u),e.cleanup(n,function(){e.domlib.removeEventListener(n,"key"+i,u)})}});var t={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,Html)}(function(e,t){t.runDirective=function(t,n,r){t=t(n),e(function(){r(t)})},t.cleanup=function(t,n){e.cleanup(n)},t.prototype.property=function(t){var n=this.node;return e(function(){t(n)}),this},t.addDirective("data",function(n){function r(){return function(r,i){function o(){var t=e.peek(i),r=n.value;return t.toString()!==r&&i(r),!0}arguments.length<2&&(i=r,r="change"),e(function(){n.value=i()}),t.domlib.addEventListener(n,r,o),e.cleanup(function(){t.domlib.removeEventListener(n,r,o)})}}function i(){return function(r,i,o){function u(){return r(n.checked?i:o),!0}i=void 0===i?!0:i,o=void 0===o?i===!0?!1:null:o,e(function(){n.checked=r()===i}),t.domlib.addEventListener(n,"change",u),e.cleanup(function(){t.domlib.removeEventListener(n,"change",u)})}}function o(){return function(r,i){function o(){return n.checked&&r(i),!0}i=void 0===i?!0:i,e(function(){n.checked=r()===i}),t.domlib.addEventListener(n,"change",o),e.cleanup(function(){t.domlib.removeEventListener(n,"change",o)})}}var u=n.nodeName,s=n.type&&n.type.toUpperCase(),a="INPUT"===u?"TEXT"===s?r:"RADIO"===s?o:"CHECKBOX"===s?i:null:"TEXTAREA"===u?r:"SELECT"===u?r:null;if(!a)throw new Error("@signal can only be applied to a form control element, \nsuch as <input/>, <textarea/> or <select/>.  Element ``"+n+"'' is \nnot a recognized control.  Perhaps you applied it to the wrong node?");return a()})}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,htmlliterals)}(function(e,t){function n(){for(var t,n;t=document.querySelector("script[type='"+u+"']");)t.type+="-processed",n=t.src?i(t.src):e.data(t.textContent||t.innerText||t.innerHTML),c.push(new o(t,n))}function r(e){var n=t.preprocess(e.source(),s),r=document.createElement("script"),i=e.el.parentNode,o=e.el.nextSibling;r.type="text/javascript",r.src="data:text/javascript;charset=utf-8,"+escape(n),r.async=e.el.async,r.defer=e.el.defer,o?i.insertBefore(r,o):i.appendNode(r)}function i(t){var n=e.data(void 0),r=new window.XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){if(r.readyState===a){if(r.status<200||r.status>=300)throw new Error("surplus.js: error fetching file:"+t);n(r.responseText)}},r.send(),n}function o(e,t){this.el=e,this.source=t}var u="text/javascript-htmlliterals",s=window.surplus||{},a=4,c=e.array([]),f=0;e(function(){for(;f<c().length&&void 0!==c()[f].source();f++)r(c()[f])}),n()});