!function(e){var t={};e(function(e,n,i){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=i.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t.S:"function"==typeof define?define([],function(){return t.S}):this.S=t.S}(function(e){"use strict";e("graph",[],function(){function e(){this.count=1,this.target=null,this.generating=!1,this.deferred=[]}function t(e){this.id=e.count++,this.lineage=e.target?e.target.lineage:[],this.updates=[]}function n(e,t,n){var i,r;for(this.lineage=n.target?n.target.lineage.slice(0):[],this.lineage.push(this),this.mod=t.update,this.updaters=[],this.updating=!1,this.listening=!0,this.generator=!!t.generator,this.gen=1,this.dependencies=[],this.dependenciesIndex={},this.cleanups=[],this.finalizers=[],i=this.lineage.length-1;i>=0;i--)r=this.lineage[i],r.mod&&(e=r.mod(e)),this.updaters[i]=e;t.sources&&(n.runWithTarget(function(){for(var e=0;e<t.sources.length;e++)t.sources[e]()},this),this.listening=!1)}function i(e,t){this.active=!0,this.gen=e.gen,this.updates=t.updates,this.offset=t.updates.length;for(var n=0,i=Math.min(e.lineage.length,t.lineage.length);i>n&&e.lineage[n]===t.lineage[n];n++);this.update=e.updaters[n],this.updates.push(this.update),e.dependencies.push(this),e.dependenciesIndex[t.id]=this}return e.prototype={reportReference:function(e){this.target&&this.target.addSource(e)},reportFormula:function(e){this.target&&(this.generating?this.target.finalizers:this.target.cleanups).push(e)},runWithTarget:function(e,t){if(!t.updating){var n,i;return n=this.target,this.target=t,t.beginUpdate(),t.updating=!0,i=this.runWithTargetInner(e,n),t.endUpdate(),i}},runWithTargetInner:function(e,t){try{return e()}finally{this.target.updating=!1,this.target=t}},peek:function(e){var t;if(!this.target)return e();t=this.target.listening,this.target.listening=!1;try{return e()}finally{this.target.listening=t}},runDeferred:function(){if(!this.target)for(;0!==this.deferred.length;)this.deferred.shift()()}},t.prototype={propagate:function(){var e,t,n=this.updates;for(e=0;e<n.length;e++)t=n[e],t&&t()}},n.prototype={beginUpdate:function(){this.cleanup(),this.gen++},endUpdate:function(){if(this.listening){var e,t;for(e=0;e<this.dependencies.length;e++)t=this.dependencies[e],t.active&&t.gen<this.gen&&t.deactivate()}},addSource:function(e){if(this.listening){var t=this.dependenciesIndex[e.id];t?t.activate(this.gen):new i(this,e)}},addChild:function(e){(this.generator?this.finalizers:this.cleanups).push(e)},cleanup:function(){for(var e=0;e<this.cleanups.length;e++)this.cleanups[e]();this.cleanups=[]},dispose:function(){var e;for(e=0;e<this.finalizers.length;e++)this.finalizers[e]();for(e=this.dependencies.length-1;e>=0;e--)this.dependencies[e].deactivate()}},i.prototype={activate:function(e){this.active||(this.active=!0,this.updates[this.offset]=this.update),this.gen=e},deactivate:function(){this.active&&(this.updates[this.offset]=null),this.active=!1}},{Overseer:e,Source:t,Target:n,Dependency:i}}),e("S",["graph"],function(e){function t(t){function n(e){if(arguments.length>0){if(void 0===e)throw new Error("S.data can't be set to undefined.  In S, undefined is reserved for namespace lookup failures.");t=e,r.propagate(),w.runDeferred()}else w.reportReference(r);return t}if(void 0===t)throw new Error("S.data can't be initialized with undefined.  In S, undefined is reserved for namespace lookup failures.");var r=new e.Source(w);return n.toString=i,Array.isArray(t)&&d(n),n}function n(t,n){function i(){return w.reportReference(c),a}function r(){w.runWithTarget(o,f)}function o(){var e=t();void 0!==e&&(a=e,c.propagate())}function s(){f.cleanup(),f.dispose()}function u(){return"[formula: "+(void 0!==a?a+" - ":"")+t+"]"}n=n||{};var a,c=new e.Source(w),f=new e.Target(r,n,w);return w.reportFormula(s),i.dispose=s,i.toString=u,(n.init?n.init(r):r)(),w.runDeferred(),i}function i(){return"[data: "+n.peek(this)+"]"}function r(e){return w.peek(e)}function o(e){w.target?w.deferred.push(e):e()}function s(e){if(!w.target)throw new Error("S.cleanup() must be called from within an S.formula.  Cannot call it at toplevel.");w.target.cleanups.push(e)}function u(e){if(!w.target)throw new Error("S.finalize() must be called from within an S.formula.  Cannot call it at toplevel.");w.target.finalizers.push(e)}function a(e,t){return function(n){return 0!==arguments.length&&t(n),e()}}function c(e){function t(){var e;for(e=0;e<c.length;e++)c[e]();c=[]}w.target&&w.generating&&e();oldGenerator=w.generator,w.generator=c,w.target&&w.target.finalizers.push(t);try{e()}finally{w.generator=oldGenerator}return t}function f(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t():t})}function d(e){e.push=h,e.pop=l,e.shift=p,e.unshift=g,e.splice=v,e.remove=m}function h(e){var t=r(this);return t.push(e),this(t),e}function l(){var e=r(this),t=e.pop();return this(e),t}function p(){var e=r(this),t=e.shift();return this(e),t}function g(e){var t=r(this);return t.unshift(e),this(t),e}function v(){var e=r(this),t=e.splice.apply(e,arguments);return this(e),t}function m(e){var t=r(this),n=t.indexOf(e);return-1!==n?(t.splice(n,1),this(t),e):void 0}var w=new e.Overseer;return n.data=t,n.peek=r,n.defer=o,n.proxy=a,n.cleanup=s,n.finalize=u,n.generator=c,n.toJSON=f,n}),e("schedulers",["S"],function(e){function t(){return function(){}}function n(e){return void 0!==e?u(e):function(e){var t=!1;return function(){t||(t=!0,u(function(){t=!1,e()}))}}}function i(e){return function(t){var n=0,i=!1;return function(){if(!i){var r=Date.now();r-n>e?(n=r,t()):(i=!0,setTimeout(function(){n=Date.now(),i=!1,t()},e-(r-n)))}}}}function r(e){return function(t){var n=0,i=0;return function(){var r=Date.now();r>n&&(n=r,i&&clearTimeout(i),i=setTimeout(function(){t()},e))}}}function o(e){return function(t){var n=!1;return function(){n||(n=!0,e(function(){n=!1,t()}))}}}function s(){function e(e){n.push(e)}function t(){for(var e=0;e<n.length;e++)n[e]();n=[]}var n=[];return e.go=t,e}var u=e.defer;return{stop:t,defer:n,throttle:i,debounce:r,pause:o,stopsign:s}}),e("FormulaOptionBuilder",["S","schedulers"],function(e,t){function n(){this.options={sources:null,update:null,init:null,generator:!1}}function i(e,t){return t?function(){return e(t())}:e}function r(e,t){return e?e.concat(t):t}function o(e,t){e.options.update=i(t,e.options.update)}function s(e,t){e.options.init=i(t,e.options.init)}n.prototype={S:function(t){return e(t,this.options)},on:function(e){return e=e?Array.isArray(e)?e:[e]:[],this.options.sources=r(this.options.sources,e),this},once:function(){return this.options.sources=[],this},skipFirst:function(){if(null===this.options.sources||0===this.options.sources.length)throw new Error("to use skipFirst, you must first have specified at least one dependency with .on(...)");return s(this,modifiers.stop),this}},"defer throttle debounce pause".split(" ").map(function(e){n.prototype[e]=function(n){return o(this,t[e](n)),this}}),"on once defer throttle debounce pause".split(" ").map(function(t){e[t]=function(e){return(new n)[t](e)}}),e.stopsign=t.stopsign})}),function(e){var t,n={},i="htmlliterals";if(e(function(e,t,i){if(n.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);n[e]=i.apply(null,t.map(function(t){if(!n.hasOwnProperty(t))throw new Error("define: module "+t+" required by "+e+" has not been defined.");return n[t]}))}),"object"==typeof module&&"object"==typeof module.exports)module.exports=n["export"];else if("function"==typeof define)define([],function(){return n["export"]});else if("undefined"!=typeof this[i])for(t in n["export"])this[i][t]=n["export"][t];else this[i]=n["export"]}(function(e){"use strict";e("directives",[],function(){return{}}),e("domlib",[],function(){return{addEventListener:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)},classListContains:function(e,t){return e.classList.contains(t)},classListAdd:function(e,t){return e.classList.add(t)},classListRemove:function(e,t){return e.classList.remove(t)}}}),e("parse",[],function(){function e(e){var i=t.exec(e);return i&&n[i[1].toLowerCase()]||"div"}var t=/<(\w+)/,n={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html"};return function(t){var n,i,r=document.createElement(e(t));if(r.innerHTML=t,n=r.childNodes.length,0===n){if(""===t)return document.createTextNode("");throw new Error("HTML parse failed for: "+t)}if(1===n)return r.childNodes[0];for(i=document.createDocumentFragment();0!==r.childNodes.length;)i.appendChild(r.childNodes[0]);return i}}),e("cachedParse",["parse"],function(e){var t={};return function(n,i){var r=t[n];return void 0===r&&(r=e(i),t[n]=r),r.cloneNode(!0)}}),e("Shell",["directives"],function(e){function t(e){if(void 0===e.nodeType)throw new Error("Shell can only wrap a DOM node.  Value ``"+e+"'' is not a DOM node.");this.node=e}return t.prototype={childNodes:function(e,n){var i,r,o=this.node.childNodes,s=e.length,u=new Array(s);if(void 0===o)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(i=0;s>i;i++){if(r=o[e[i]],!r)throw new Error("Node ``"+this.node+"'' does not have a child at index "+i+".");u[i]=new t(r)}return n(u),this},directive:function(t,n){var i=e[t];if("function"!=typeof i)throw new Error("No directive registered with name: "+t);return n(i(this.node)),this},property:function(e){return e(this.node),this}},t}),e("directives.class",["directives","domlib"],function(e,t){e["class"]=function(e){if(void 0===e.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+e+"'' does not. Perhaps you applied it to the wrong node?");return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=t.classListContains(e,n),s=i&&t.classListContains(e,i);r?(o||t.classListAdd(e,n),i&&s&&t.classListRemove(e,i)):(o&&t.classListRemove(e,n),i&&!s&&t.classListAdd(e,i))}}}),e("directives.focus",["directives"],function(e){e.focus=function(e){return function(t){t?e.focus():e.blur()}}}),e("directives.insert",["directives"],function(e){e.insert=function(e){function t(t){null===t||void 0===t||(t.nodeType?o.insertBefore(t,e):Array.isArray(t)?n(t):o.insertBefore(document.createTextNode(t.toString()),e))}function n(n){var i,r,s;for(i=0,r=n.length;r>i;i++)t(n[i]),s&&3==s.nodeType&&s.nextSibling!==e&&3===s.nextSibling.nodeType&&o.insertBefore(document.createTextNode(" "),s.nextSibling),s=e.previousSibling}function i(e,t){for(var n=e.nextSibling;n!==t;)o.removeChild(n),n=e.nextSibling}function r(e){return o.insertBefore(document.createTextNode(""),e)}var o,s;return function(n){if(o=e.parentNode,!o)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+e+"'' is currently unattached to a parent.");if(s){if(s.parentNode!==o)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.");i(s,e)}else s=r(e);t(n)}}}),e("directives.onkey",["directives","domlib"],function(e,t){e.onkey=function(e){function i(e){return e.keyCode===r&&s(),!0}var r,o,s;return function(u,a,c){if(arguments.length<3&&(c=a,a="down"),r=n[u.toLowerCase()],s=c,void 0===r)throw new Error("@key: unrecognized key identifier '"+u+"'");if("function"!=typeof s)throw new Error("@key: must supply a function to call when the key is entered");a="key"+a,a!==o&&(o&&t.removeEventListener(e,o,i),t.addEventListener(e,a,i),o=a)}};var n={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}}),e("export",["parse","cachedParse","Shell","directives","domlib"],function(e,t,n,i,r){return{parse:e,cachedParse:t,Shell:n,directives:i,domlib:r}})}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,htmlliterals)}(function(e,t){t.Shell.prototype.directive=function(n,i){var r=this.node,o=t.directives[n];if("function"!=typeof o)throw new Error("No directive registered with name: "+n);return o=o(r),e(function(){i(o)}),this},t.Shell.prototype.property=function(t){var n=this.node;return e(function(){t(n)}),this},t.directives.signal=function(n){function i(){function i(){var t=e.peek(u),i=n.value;return t.toString()!==i&&u(i),!0}var r=null;return function(o,a){arguments.length<2&&(a=o,o="change"),s(a),e(function(){n.value=u()}),o!==r&&(r&&t.domlib.removeEventListener(n,r,i),t.domlib.addEventListener(n,o,i),r=o)}}function r(){var i=!0,r=!1;return t.domlib.addEventListener(n,"change",function(){return u(n.checked?i:r),!0}),function(t,o,a){s(t),i=void 0===o?!0:o,r=void 0===a?i===!0?!1:null:a,e(function(){n.checked=u()===i})}}function o(){var i=!0;return t.domlib.addEventListener(n,"change",function(){return n.checked&&u(i),!0}),function(t,r){s(t),i=void 0===r?!0:r,e(function(){n.checked=u()===i})}}function s(e){if("function"!=typeof e)throw new Error("@signal must receive a function for two-way binding.  \nPerhaps you mistakenly dereferenced it with '()'?");u=e}var u=null,a=n.nodeName,c=n.type&&n.type.toUpperCase(),f="INPUT"===a?"TEXT"===c?i:"RADIO"===c?o:"CHECKBOX"===c?r:null:"TEXTAREA"===a?i:"SELECT"===a?i:null;if(!f)throw new Error("@signal can only be applied to a form control element, \nsuch as <input/>, <textarea/> or <select/>.  Element ``"+n+"'' is \nnot a recognized control.  Perhaps you applied it to the wrong node?");return f()}});