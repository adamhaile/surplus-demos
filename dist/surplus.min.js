!function(e){var t={};e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t.S:"function"==typeof define?define([],function(){return t.S}):this.S=t.S}(function(e){"use strict";e("graph",[],function(){function e(){this.count=1,this.target=null,this.deferred=[]}function t(e){this.id=e.count++,this.lineage=e.target?e.target.lineage:[],this.updates=[]}function n(e,t,n){var r,i,o;for(this.lineage=n.target?n.target.lineage.slice(0):[],this.lineage.push(this),this.scheduler=t.update,this.listening=!0,this.pinning=t.pinning||!1,this.locked=!0,this.gen=1,this.dependencies=[],this.dependenciesIndex={},this.cleanups=[],this.finalizers=[],this.updaters=new Array(this.lineage.length+1),this.updaters[this.lineage.length]=e,r=this.lineage.length-1;r>=0;r--)i=this.lineage[r],i.scheduler&&(e=i.scheduler(e)),this.updaters[r]=e;if(t.sources){o=n.target,n.target=this,this.locked=!1;try{for(r=0;r<t.sources.length;r++)t.sources[r]()}finally{this.locked=!0,n.target=o}this.listening=!1}}function r(e,t){this.active=!0,this.gen=e.gen,this.updates=t.updates,this.offset=t.updates.length;for(var n=0,r=Math.min(e.lineage.length,t.lineage.length);r>n&&e.lineage[n]===t.lineage[n];n++);this.update=e.updaters[n],this.updates.push(this.update),e.dependencies.push(this),e.dependenciesIndex[t.id]=this}return e.prototype={reportReference:function(e){this.target&&this.target.addSource(e)},reportFormula:function(e,t){this.target&&this.target.addSubformula(e,t)},runDeferred:function(){if(!this.target)for(;0!==this.deferred.length;)this.deferred.shift()()}},t.prototype={propagate:function(){var e,t,n=this.updates,r=n.length;for(e=0;r>e;e++)t=n[e],t&&t()},dispose:function(){this.lineage=null,this.updates.length=0}},n.prototype={beginUpdate:function(){this.cleanup(),this.gen++},endUpdate:function(){if(this.listening){var e,t;for(e=0;e<this.dependencies.length;e++)t=this.dependencies[e],t.active&&t.gen<this.gen&&t.deactivate()}},addSubformula:function(e,t){if(this.locked)throw new Error("Cannot create a new subformula except while updating the parent");(t||this.pinning?this.finalizers:this.cleanups).push(e)},addSource:function(e){if(this.listening&&!this.locked){var t=this.dependenciesIndex[e.id];t?t.activate(this.gen,e):new r(this,e)}},cleanup:function(){for(var e=0;e<this.cleanups.length;e++)this.cleanups[e]();this.cleanups=[]},dispose:function(){var e;for(this.cleanup(),e=0;e<this.finalizers.length;e++)this.finalizers[e]();for(e=this.dependencies.length-1;e>=0;e--)this.dependencies[e].deactivate();this.lineage=null,this.scheduler=null,this.updaters=null,this.cleanups=null,this.finalizers=null,this.dependencies=null,this.dependenciesIndex=null}},r.prototype={activate:function(e,t){this.active||(this.active=!0,this.updates=t.updates,this.updates[this.offset]=this.update),this.gen=e},deactivate:function(){this.active&&(this.updates[this.offset]=null,this.updates=null),this.active=!1}},{Overseer:e,Source:t,Target:n,Dependency:r}}),e("core",["graph"],function(e){function t(t){function n(e){return arguments.length>0?(t=e,r.propagate(),l.runDeferred()):l.reportReference(r),t}var r=new e.Source(l);return n.toJSON=i,n}function n(){this.sources=null,this.pin=!1,this.update=null,this.init=null}function r(t,n){function r(){return a&&l.reportReference(a),u}function o(){if(!c&&f){c=!0;var e;e=l.target,l.target=f,f.beginUpdate(),f.locked=!1;try{u=t(),f&&(f.locked=!0),a&&a.propagate()}finally{c=!1,f&&(f.locked=!0),l.target=e}f&&f.endUpdate()}}function s(){a&&(a.dispose(),f.dispose()),a=f=t=u=void 0}var u,c,a=new e.Source(l),f=new e.Target(o,n,l);return l.reportFormula(s,n.pin),r.dispose=s,r.toJSON=i,(n.init?n.init(o):o)(),l.runDeferred(),r}function i(){return this()}function o(e){if(!l.target||!l.target.listening)return e();l.target.listening=!1;try{return e()}finally{l.target.listening=!0}}function s(e){if(!l.target||l.target.pinning)return e();l.target.pinning=!0;try{return e()}finally{l.target.pinning=!1}}function u(e){l.target?l.deferred.push(e):e()}function c(e){if(!l.target)throw new Error("S.cleanup() must be called from within an S.formula.  Cannot call it at toplevel.");l.target.cleanups.push(e)}function a(e){if(!l.target)throw new Error("S.finalize() must be called from within an S.formula.  Cannot call it at toplevel.");l.target.finalizers.push(e)}var l=new e.Overseer;return{data:t,FormulaOptions:n,formula:r,defer:u,peek:o,pin:s,cleanup:c,finalize:a}}),e("schedulers",["core"],function(e){function t(){return function(){}}function n(e){return function(t){var n=!1;return function(){n||(n=!0,e(function(){n=!1,t()}))}}}function r(){return n(e.defer)}function i(e){return function(t){var n=0,r=!1;return function(){if(!r){var i=Date.now();i-n>e?(n=i,t()):(r=!0,setTimeout(function(){n=Date.now(),r=!1,t()},e-(i-n)))}}}}function o(e){return function(t){var n=0,r=0;return function(){var i=Date.now();i>n&&(n=i,r&&clearTimeout(r),r=setTimeout(function(){t()},e))}}}function s(){function e(e){n.push(e)}function t(){for(var e=0;e<n.length;e++)n[e]();n=[]}var n=[];return e.go=t,e}function u(e){return function(t){for(var n=0;n<e.length;n++)if(void 0===e[n]())return;t()}}return{stop:t,pause:n,defer:r,throttle:i,debounce:o,stopsign:s,when:u}}),e("options",["core","schedulers"],function(e,t){function n(){this.options=new e.FormulaOptions}function r(e,t){return t?function(){return e(t())}:e}function i(e,t){return e?e.concat(t):t}function o(e,t){e.options.update=r(t,e.options.update)}function s(e,t){e.options.init=r(t,e.options.init)}return n.prototype={on:function(e){return e=e?Array.isArray(e)?e:[e]:[],this.options.sources=i(this.options.sources,e),this},once:function(){return this.options.sources=[],this},pin:function(){return this.options.pin=!0,this},when:function(e){e=e?Array.isArray(e)?e:[e]:[],this.options.sources=i(this.options.sources,e);var n=t.pause(t.when(e));return s(this,n),o(this,n),this}},"defer throttle debounce pause".split(" ").map(function(e){n.prototype[e]=function(n){return o(this,t[e](n)),this}}),{FormulaOptionsBuilder:n}}),e("misc",[],function(){function e(e,t){return function(n){return 0!==arguments.length&&t(n),e()}}return{proxy:e}}),e("S",["core","options","schedulers","misc"],function(e,t,n,r){function i(t){var n,r;return arguments.length>1&&(n=t,r=Array.prototype.slice.call(arguments,1),t=function(){return n.apply(null,r)}),e.formula(t,new e.FormulaOptions)}return i.data=e.data,i.peek=e.peek,i.cleanup=e.cleanup,i.finalize=e.finalize,"on once when defer throttle debounce pause".split(" ").map(function(e){i[e]=function(n){return(new t.FormulaOptionsBuilder)[e](n)}}),i.pin=function(n){return 0===arguments.length?(new t.FormulaOptionsBuilder).pin():void e.pin(n)},t.FormulaOptionsBuilder.prototype.S=function(t){var n,r;return arguments.length>1&&(n=t,r=Array.prototype.slice.call(arguments,1),t=function(){return n.apply(null,r)}),e.formula(t,this.options)},i.stopsign=n.stopsign,i.proxy=r.proxy,i})}),function(e){"object"==typeof exports?e(require("S")):"function"==typeof define?define(["S"],e):e(S)}(function(e){"use strict";function t(t){if(!Array.isArray(t))throw new Error("S.array must be initialized with an array");var r=e.data(t);return r.pop=b,r.push=w,r.shift=S,r.splice=E,r.unshift=x,r.remove=T,r.removeAll=C,n(r)}function n(e){return e.concat=d,e.every=m,e.filter=f,e.find=u,e.forEach=i,e.includes=c,e.map=s,e.sort=a,e.reduce=h,e.reduceRight=p,e.reverse=v,e.slice=y,e.some=g,e.mapS=r,e.combine=o,e.orderBy=l,e.defer=k,e.throttle=H,e.debounce=L,e.pause=A,e}function r(t,r,i){var o=this,s=[],u=[],c=0,a=e.on(o).S(function(){var n,a,l,f,d,h=o(),p=h.length,m=new Array(p),g=[],v=[];e:for(n=0,l=0;c>n;n++){for(f=u[n],a=0;p>a;a++,l=(l+1)%p)if(s[n]===h[l]&&!m.hasOwnProperty(l)){m[l]=f,n!==l&&(g.push(n),v.push(l)),l=(l+1)%p;continue e}r&&r(f,n),t&&f.dispose()}i&&g.length&&i(g,v);for(var n=0;p>n;n++)m.hasOwnProperty(n)?u[n]=m[n]:(f=h[n],t?(d=function(e,n){return function(){return t(e,n)}}(f,n),u[n]=e.pin().S(d)):u[n]=f);return c=u.length=p,s=h.slice(),u});return n(a)}function i(t,r,i){var o=this,s=[],u=0,c=e.on(o).S(function(){var n,c,a,l,f=o(),d=f.length,h=new Array(d),p=[],m=[];e:for(n=0,a=0;u>n;n++){for(l=s[n],c=0;d>c;c++,a=(a+1)%d)if(l===f[a]&&!h[a]){h[a]=!0,n!==a&&(p.push(n),m.push(a)),a=(a+1)%d;continue e}r&&r(l,n)}return i&&p.length&&i(p,m),t&&e.pin(function(){for(var e=0;d>e;e++)h[e]||t(f[e],e)}),u=d,s=f.slice()});return n(c)}function o(){var t=this;return n(e(function(){for(var e=t(),n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r]();return n}))}function s(e,t,n){var r=this.mapS(e,t,n);return e?r.combine():r}function u(t){var r=this;return n(e(function(){var e,n,i=r();for(e=0;e<i.length;e++)if(n=i[e],t(n))return n;return void 0}))}function c(t){var r=this;return n(e(function(){for(var e=r(),n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}))}function a(t){var r=this;return n(e(function(){var e=r().slice(0);return t?e.sort(t):e.sort(),e}))}function l(t){var r,i=this;return"function"!=typeof t&&(r=t,t=function(e){return e[r]}),n(e(function(){var e=i().slice(0);return e.sort(function(e,n){return e=t(e),n=t(n),n>e?-1:e>n?1:0}),e}))}function f(t){var r=this;return n(e(function(){var e,n,i=r(),o=[];for(e=0;e<i.length;e++)n=i[e],t(n)&&o.push(n);return o}))}function d(){var t=this,r=Array.prototype.slice.call(arguments);return n(e(function(){for(var e=t(),n=0;n<r.length;n++)e=e.concat(r[n]());return e}))}function h(t,r){var i=this;return n(e(function(){for(var e=i(),n=r,o=0;o<e.length;o++)n=t(n,e[o],o,e);return n}))}function p(t,r){var i=this;return n(e(function(){for(var e=i(),n=r,o=e.length-1;o>=0;o--)n=t(n,e[o],o,e);return n}))}function m(t){var r=this;return n(e(function(){for(var e=r(),n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0}))}function g(t){var r=this;return n(e(function(){var e=r();if(void 0===t)return 0!==e.length;for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}))}function v(){var t=this;return n(e(function(){var e=t().slice(0);return e.reverse(),e}))}function y(t,r){var i=this;return n(e(function(){return i().slice(t,r)}))}function w(t){var n=e.peek(this);return n.push(t),this(n),this}function b(){var t=e.peek(this),n=t.pop();return this(t),n}function x(t){var n=e.peek(this);return n.unshift(t),this(n),this}function S(){var t=e.peek(this),n=t.shift();return this(t),n}function E(){var t=e.peek(this);return Array.prototype.splice.apply(t,arguments),this(t),this}function T(t){for(var n=e.peek(this),r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1);break}return this(n),this}function C(t){for(var n=e.peek(this),r=0;r<n.length;)n[r]===t?n.splice(r,1):r++;return this(n),this}function k(){return n(e.defer().S(this))}function H(t){return n(e.throttle(t).S(this))}function L(t){return n(e.debounce(t).S(this))}function A(t){return n(e.pause(t).S(this))}e.array=t}),function(e){var t={},n={};e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof exports?n=exports:"function"==typeof define?define([],function(){return n}):n=this.htmlliterals=this.htmlliterals||n,n.preprocess=t.preprocess}(function(e){"use strict";e("sourcemap",[],function(){function e(e){return"\x00"+e.line+","+e.col+"\x00"}function t(){return"\x00\x00"}function n(e){var t="",n=0,r=0,i=0,o=!1,c=0,a=!1,l=e.replace(u.locs,function(e,u,l,f,d,h,p){if(u)return t+=";",o?(t+="AA"+s(1)+s(0-i),r++,i=0,a=!0):a=!1,c=p+u.length,n=0,u;if(l){var m=p-c;return f=parseInt(f),d=parseInt(d),t+=(a?",":"")+s(m-n)+"A"+s(f-r)+s(d-i),o=!0,a=!0,n=m,r=f,i=d,""}return h?(o=!1,""):void 0});return{src:l,mappings:t}}function r(e,t){var r=n(e),o=i(r.mappings,t);return{src:r.src,map:o}}function i(e,t){return{version:3,file:"out.js",sources:["in.js"],sourcesContent:[t],names:[],mappings:e}}function o(e,t){var n=r(e,t),i=n.src+"\n//# sourceMappingURL=data:"+escape(JSON.stringify(n.map));return i}function s(e){var t,n="";for(e=0>e?(-e<<1)+1:e<<1,e=e.toString(32),t=e.length-1;t>0;t--)n+=a[parseInt(e[t],32)];return n+=c[parseInt(e[0],32)]}var u={locs:/(\n)|(\u0000(\d+),(\d+)\u0000)|(\u0000\u0000)/g},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdef",a="ghijklmnopqrstuvwxyz0123456789+/";return{segmentStart:e,segmentEnd:t,extractMap:r,appendMap:o}}),e("tokenize",[],function(){var e={tokens:/<\/?(?=\w)|\/?>|<!--|-->|@|=|\)|\(|\[|\]|\{|\}|"|'|\/\/|\n|\/\*|\*\/|(?:[^<>@=\/@=()[\]{}"'\n*-]|(?!-->)-|\/(?![>/*])|\*(?!\/)|(?!<\/?\w|<!--)<\/?)+/g};return function(t){var n=t.match(e.tokens);return n}}),e("AST",[],function(){return{CodeTopLevel:function(e){this.segments=e},CodeText:function(e,t){this.text=e,this.loc=t},EmbeddedCode:function(e){this.segments=e},HtmlLiteral:function(e){this.nodes=e},HtmlElement:function(e,t,n,r,i){this.beginTag=e,this.properties=t,this.directives=n,this.content=r,this.endTag=i},HtmlText:function(e){this.text=e},HtmlComment:function(e){this.text=e},HtmlInsert:function(e){this.code=e},Property:function(e,t,n){this.name=e,this.code=t,this.callback=n},Directive:function(e,t){this.name=e,this.code=t},AttrStyleDirective:function(e,t,n,r){this.name=e,this.params=t,this.code=n,this.callback=r}}}),e("parse",["AST"],function(e){var t={propertyLeftSide:/\s(\S+)\s*=>?\s*$/,embeddedCodePrefix:/^[+\-!~]*[a-zA-Z_$][a-zA-Z_$0-9]*/,embeddedCodeInterim:/^(?:\.[a-zA-Z_$][a-zA-Z_$0-9]*)+/,embeddedCodeSuffix:/^\+\+|--/,directiveName:/^[a-zA-Z_$][a-zA-Z_$0-9]*(:[^\s:=]*)*/,stringEscapedEnd:/[^\\](\\\\)*\\$/,ws:/^\s*$/,leadingWs:/^\s+/,tagTrailingWs:/\s+(?=\/?>$)/,emptyLines:/\n\s+(?=\n)/g},n={"(":")","[":"]","{":"}"};return function(r){function i(){for(var t=[],n="",r=H();!D;)b("<")||b("<!--")||b("@")?(n&&t.push(new e.CodeText(n,r)),n="",t.push(o()),r=H()):b('"')||b("'")?n+=m():b("//")?n+=g():b("/*")?n+=v():(n+=O,y());return n&&t.push(new e.CodeText(n,r)),new e.CodeTopLevel(t)}function o(){x("<")&&x("<!--")&&x("@")&&w("not at start of html expression");for(var t,n,r=[];!D;)if(b("<"))r.push(s());else if(b("<!--"))r.push(a());else if(b("@"))r.push(l());else{if(t=L(),n=c(),D||!(b("<")||b("<!--")||b("@"))){A(t);break}r.push(n)}return new e.HtmlLiteral(r)}function s(){x("<")&&w("not at start of html element");var n=H(),r="",i=[],o=[],c=[],h="",p=!0;for(r+=O,y();!D&&x(">")&&x("/>");)b("@")?o.push(d()):b("=")?r=f(r,i):(r+=O,y());if(D&&w("unterminated start node",n),p=b(">"),r+=O,y(),r=r.replace(t.tagTrailingWs,"").replace(t.emptyLines,""),p){for(;!D&&x("</");)c.push(b("<")?s():b("@")?l():b("<!--")?a():u());for(D&&w("element missing close tag");!D&&x(">");)h+=O,y();D&&w("eof while looking for element close tag"),h+=O,y()}return new e.HtmlElement(r,i,o,c,h)}function u(){for(var t="";!D&&x("<")&&x("<!--")&&x("@")&&x("</");)t+=O,y();return new e.HtmlText(t)}function c(){for(var t="";!D&&T();)t+=O,y();return new e.HtmlText(t)}function a(){x("<!--")&&w("not in HTML comment");for(var t="";!D&&x("-->");)t+=O,y();return D&&w("unterminated html comment"),t+=O,y(),new e.HtmlComment(t)}function l(){return x("@")&&w("not at start of code insert"),y(),new e.HtmlInsert(h())}function f(n,r){x("=")&&w("not at equals sign of a property assignment");var i,o,s=!1;return n+=O,y(),b(">")&&(s=!0,n+=O,y()),T()&&(n+=O,y()),i=t.propertyLeftSide.exec(n),i&&(s||x('"')&&x("'"))&&(n=n.substring(0,n.length-i[0].length),o=i[1],k(t.leadingWs),r.push(new e.Property(o,h(),s))),n}function d(){x("@")&&w("not at start of directive"),y();var n,r,i,o=k(t.directiveName),s=!1;return o||w("directive must have name"),b("(")?(r=[],i=H(),n=p(r,"",i),n&&r.push(new e.CodeText(n,i)),new e.Directive(o,new e.EmbeddedCode(r))):(T()&&y(),x("=")&&w("unrecognized directive - must have form like @foo:bar = ... or @foo( ... )"),y(),b(">")&&(s=!0,y()),k(t.leadingWs),o=o.split(":"),new e.AttrStyleDirective(o[0],o.slice(1),h(),s))}function h(){var n,r=H(),i=[],o="",s=H();for((n=k(t.embeddedCodePrefix))&&(o+=n,(n=k(t.embeddedCodeInterim))&&(o+=n));C();)o=p(i,o,s),(n=k(t.embeddedCodeInterim))&&(o+=n);return(n=k(t.embeddedCodeSuffix))&&(o+=n),o&&i.push(new e.CodeText(o,s)),0===i.length&&w("not in embedded code",r),new e.EmbeddedCode(i)}function p(t,n,r){var i=C();for(void 0===i&&w("not in parentheses"),n+=O,y();!D&&x(i);)b("'")||b('"')?n+=m():b("//")?n+=g():b("/*")?n+=v():b("<")||b("<!--")?(n&&t.push(new e.CodeText(n,{line:r.line,col:r.col})),n="",t.push(o()),r.line=z,r.col=_):b("(")?n=p(t,n,r):(n+=O,y());return D&&w("unterminated parentheses"),n+=O,y(),n}function m(){x("'")&&x('"')&&w("not in quoted string");var e,n;for(e=n=O,y();!D&&(x(e)||t.stringEscapedEnd.test(n));)n+=O,y();return D&&w("unterminated string"),n+=O,y(),n}function g(){x("//")&&w("not in code comment");for(var e="";!D&&x("\n");)e+=O,y();return D||(e+=O,y()),e}function v(){x("/*")&&w("not in code comment");for(var e="";!D&&x("*/");)e+=O,y();return D&&w("unterminated multi-line comment"),e+=O,y(),e}function y(){"\n"===O?(z++,_=0,P++):O&&(_+=O.length,P+=O.length),++N>=r.length?(D=!0,O=null):O=r[N]}function w(e,t){var n=t?" at line "+t.line+" col "+t.col+": ``"+r.join("").substr(t.pos,30).replace("\n","")+"''":"";throw new Error(e+n)}function b(e){return O===e}function x(e){return O!==e}function S(e){return e.test(O)}function E(e){return e.exec(O)}function T(){return!!S(t.ws)}function C(){return n[O]}function k(e){var t=E(e);return t&&(t=t[0])?(_+=t.length,P+=t.length,O=O.substring(t.length),""===O&&y(),t):null}function H(){return{line:z,col:_,pos:P}}function L(){return{TOK:O,i:N,EOF:D,LINE:z,COL:_}}function A(e){O=e.TOK,N=e.i,D=e.EOF,z=e.LINE,_=e.COL}var N=0,D=0===r.length,O=!D&&r[N],z=0,_=0,P=0;return i()}}),e("genCode",["AST","sourcemap"],function(e,t){function n(e,t,n){var r,i,o=[],s=[],c=[],a=n+"    ",l=a+"     ",f="";for(i=0;i<t.length;i++)r=t[i].genDirectives(e,l),r&&(o.push(i),c.push(u(t[i])),s.push(r));if(o.length){for(f+=".child(["+o.join(", ")+"], function (__) {"+a,i=0;i<s.length;i++)i&&(f+=a),f+="// "+c[i]+a,f+="__["+i+"]"+s[i]+";";f+=n+"})"}return f}function r(e,t,n,r){var i,o="";for(i=0;i<t.length;i++)i&&r&&(o+=r),o+=t[i][n](e,o);return o}function i(e){return"'"+e.replace(a.backslashes,"\\\\").replace(a.singleQuotes,"\\'").replace(a.newlines,"\\\n")+"'"}function o(e,t){var n=a.eventProperty.test(e)?e.substring(2):"__";return"function ("+n+") { "+t+" }"}function s(e){var t=a.lastline.exec(e);return t=t?t[0]:"",t.replace(a.nonws," ")}function u(e){return c(e.beginTag||e.text||e.genHtml())}function c(e){var t=a.firstline.exec(e);return t?t[0]:""}var a={eventProperty:/^on/,backslashes:/\\/g,newlines:/\n/g,singleQuotes:/'/g,firstline:/^[^\n]*/,lastline:/[^\n]*$/,nonws:/\S/g};e.CodeTopLevel.prototype.genCode=e.EmbeddedCode.prototype.genCode=function(e){return r(e,this.segments,"genCode")},e.CodeText.prototype.genCode=function(e){return(e.sourcemap?t.segmentStart(this.loc):"")+this.text+(e.sourcemap?t.segmentEnd():"")};var l=0;e.HtmlLiteral.prototype.genCode=function(e,t){var o=r(e,this.nodes,"genHtml"),u="\n"+s(t),c=this.nodes.length>1?n(e,this.nodes,u):this.nodes[0].genDirectives(e,u),a="new "+e.symbol+"("+l++ +","+u+i(o)+")";return c&&(a+=u+c+u),a="("+a+".node)"},e.HtmlElement.prototype.genHtml=function(e){return this.beginTag+r(e,this.content,"genHtml")+(this.endTag||"")},e.HtmlComment.prototype.genHtml=e.HtmlText.prototype.genHtml=function(){return this.text},e.HtmlInsert.prototype.genHtml=function(){return"<!-- insert -->"},e.HtmlElement.prototype.genDirectives=function(e,t){var i=n(e,this.content,t),o=r(e,this.properties,"genDirective",t),s=r(e,this.directives,"genDirective",t);return o+(o&&(s||i)?t:"")+s+(s&&i?t:"")+i},e.HtmlComment.prototype.genDirectives=e.HtmlText.prototype.genDirectives=function(){return null},e.HtmlInsert.prototype.genDirectives=function(t){return new e.AttrStyleDirective("insert",[],this.code,!1).genDirective(t)},e.Property.prototype.genDirective=function(e){var t=this.code.genCode(e);return this.callback&&(t=o(this.name,t)),".property(function (__) { __."+this.name+" = "+t+"; })"},e.Directive.prototype.genDirective=function(e){return"."+this.name+"(function (__) { __"+this.code.genCode(e)+"; })"},e.AttrStyleDirective.prototype.genDirective=function(e){for(var t="."+this.name+"(function (__) { __(",n=0;n<this.params.length;n++)t+=i(this.params[n])+", ";return t+=this.callback?o(this.name,this.code.genCode(e)):this.code.genCode(e),t+="); })"}}),e("shims",["AST"],function(e){function t(){var e=document.createElement("ul");return e.innerHTML="    <li></li>",2===e.childNodes.length}function n(){s(e.HtmlText,function(t){!ws.test(this.text)||t.parent instanceof e.HtmlAttr||(this.text="&#xfeff;"+this.text)})}function r(){var e=document.createElement("ul");return e.innerHTML="<!-- --><li></li>",2===e.childNodes.length}function i(){s(e.HtmlComment,function(t){0===t.index&&u(new e.HtmlText("&#xfeff;"),t)})}function o(e,t){for(var n={index:0,parent:e,sibings:t};n.index<t.length;n.index++)t[n.index].shim(n)}function s(e,t){c=!0;var n=e.prototype.shim;e.prototype.shim=function(e){t.call(this,e),n.call(this,e)}}function u(e,t){t.siblings.splice(t.index,0,e),e.shim(t),t.index++}var c=!1;return e.CodeTopLevel.prototype.shim=function(e){o(this,this.segments,e)},e.HtmlLiteral.prototype.shim=function(e){o(this,this.nodes,e)},e.HtmlElement.prototype.shim=function(e){o(this,this.content,e)},e.HtmlInsert.prototype.shim=function(e){o(this,this.segments,e)},e.CodeText.prototype.shim=e.HtmlText.prototype.shim=e.HtmlComment.prototype.shim=function(){},t()||n(),r()||i(),c}),e("preprocess",["tokenize","parse","shims","sourcemap"],function(e,t,n,r){return function(i,o){o=o||{},o.symbol=o.symbol||"Html",o.sourcemap=o.sourcemap||null;var s=e(i,o),u=t(s,o);n&&u.shim();var c,a=u.genCode(o);return c="extract"===o.sourcemap?r.extractMap(a,i,o):"append"===o.sourcemap?r.appendMap(a,i,o):a}})}),function(e){var t={},n="Html";e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t[n]:"function"==typeof define?define([],function(){return t[n]}):this[n]=t[n]}(function(e){"use strict";e("domlib",[],function(){return{addEventListener:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)},classListContains:function(e,t){return e.classList.contains(t)},classListAdd:function(e,t){return e.classList.add(t)},classListRemove:function(e,t){return e.classList.remove(t)}}}),e("parse",[],function(){function e(e){var r=t.exec(e),i=r&&n[r[1].toLowerCase()]||"div";return"svg"===i?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)}var t=/<(\w+)/,n={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html",svg:"svg",g:"svg",circle:"svg",elipse:"svg",rect:"svg",text:"svg",polyline:"svg",polygon:"svg",line:"svg"};return function(t){var n,r,i=e(t);if(i.innerHTML=t,n=i.childNodes.length,0===n){if(""===t)return document.createTextNode("");throw new Error("HTML parse failed for: "+t)}if(1===n)return i.childNodes[0];for(r=document.createDocumentFragment();0!==i.childNodes.length;)r.appendChild(i.childNodes[0]);return r.startNode=r.firstChild,r.endNode=r.lastChild,r}}),e("cachedParse",["parse"],function(e){var t={},n=11;return function(r,i){var o,s=t[r];return void 0===s&&(s=e(i),t[r]=s),o=s.cloneNode(!0),o.nodeType===n&&(o.startNode=o.firstChild,o.endNode=o.lastChild),o}}),e("Html",["parse","cachedParse","domlib"],function(e,t,n){function r(n,r){void 0===n.nodeType&&(n=r?t(n,r):e(n)),this.node=n}return r.prototype={child:function i(e,t){var n,i,o=this.node.childNodes,s=e.length,u=new Array(s);if(void 0===o)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(n=0;s>n;n++){if(i=o[e[n]],!i)throw new Error("Node ``"+this.node+"'' does not have a child at index "+n+".");u[n]=new r(i)}return t(u),this},property:function(e){return e(this.node),this}},r.addDirective=function(e,t){r.prototype[e]=function(e){return r.runDirective(t,this.node,e),this}},r.runDirective=function(e,t,n){n(e(t))},r.cleanup=function(){},r.domlib=n,r}),e("directives.attr",["Html"],function(e){e.addDirective("attr",function(e){return function(t,n){e.setAttribute(t,n)}})}),e("directives.class",["Html"],function(e){e.addDirective("class",function(t){if(void 0===t.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+t+"'' does not. Perhaps you applied it to the wrong node?");return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=e.domlib.classListContains(t,n),s=r&&e.domlib.classListContains(t,r);i?(o||e.domlib.classListAdd(t,n),r&&s&&e.domlib.classListRemove(t,r)):(o&&e.domlib.classListRemove(t,n),r&&!s&&e.domlib.classListAdd(t,r))}})}),e("directives.focus",["Html"],function(e){e.addDirective("focus",function(e){return function(t){t?e.focus():e.blur()}})}),e("directives.insert",["Html"],function(e){var t=11;e.addDirective("insert",function(e){function n(e){var n=a.nextSibling;null===e||void 0===e||(e.nodeType===t?0===e.childNodes.length&&e.startNode&&e.endNode?i(e.startNode,e.endNode):(u.insertBefore(e,n),a=n.previousSibling):e.nodeType?(n!==e&&u.insertBefore(e,n),a=e):Array.isArray(e)?r(e):(e=e.toString(),a=3!==n.nodeType||n.data!==e?u.insertBefore(document.createTextNode(e),n):n))}function r(t){var r,i,o;for(r=0,i=t.length;i>r;r++)n(t[r]),o&&3==o.nodeType&&o.nextSibling!==e&&3===o.nextSibling.nodeType&&u.insertBefore(document.createTextNode(" "),o.nextSibling),o=e.previousSibling}function i(e,t){var n,r=a.nextSibling;if(e.parentNode!==t.parentNode)throw new Error("Range must be siblings");do{if(n=e,e=e.nextSibling,!n)throw new Error("end must come after head");n!==r?u.insertBefore(n,r):r=r.nextSibling}while(n!==t);a=t}function o(e,t){if(e!==t)for(var n=e.nextSibling;n!==t;)u.removeChild(n),n=e.nextSibling}function s(e){return u.insertBefore(document.createTextNode(""),e)}var u,c,a;return function(t){if(u=e.parentNode,!u)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+e+"'' is currently unattached to a parent.");if(c){if(c.parentNode!==u)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.")}else c=s(e);a=c,n(t),o(a,e)}})}),e("directives.onkey",["Html"],function(e){e.addDirective("onkey",function(n){return function(r,i,o){function s(e){return e.keyCode===u&&o(),!0}arguments.length<3&&(o=i,i="down");var u=t[r.toLowerCase()];if(void 0===u)throw new Error("@onkey: unrecognized key identifier '"+r+"'");if("function"!=typeof o)throw new Error("@onkey: must supply a function to call when the key is entered");e.domlib.addEventListener(n,"key"+i,s),e.cleanup(n,function(){e.domlib.removeEventListener(n,"key"+i,s)})}});var t={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,Html)}(function(e,t){t.runDirective=function(t,n,r){t=t(n),e(function(){r(t)})},t.cleanup=function(t,n){e.cleanup(n)},t.prototype.property=function(t){var n=this.node;return e(function(){t(n)}),this},t.addDirective("data",function(n){function r(){return function(r,i){function o(){var t=e.peek(i),r=n.value;return t.toString()!==r&&i(r),!0}arguments.length<2&&(i=r,r="change"),e(function(){n.value=i()}),t.domlib.addEventListener(n,r,o),e.cleanup(function(){t.domlib.removeEventListener(n,r,o)})}}function i(){return function(r,i,o){function s(){return r(n.checked?i:o),!0}i=void 0===i?!0:i,o=void 0===o?i===!0?!1:null:o,e(function(){n.checked=r()===i}),t.domlib.addEventListener(n,"change",s),e.cleanup(function(){t.domlib.removeEventListener(n,"change",s)})}}function o(){return function(r,i){function o(){return n.checked&&r(i),!0}i=void 0===i?!0:i,e(function(){n.checked=r()===i}),t.domlib.addEventListener(n,"change",o),e.cleanup(function(){t.domlib.removeEventListener(n,"change",o)})}}var s=n.nodeName,u=n.type&&n.type.toUpperCase(),c="INPUT"===s?"TEXT"===u?r:"RADIO"===u?o:"CHECKBOX"===u?i:null:"TEXTAREA"===s?r:"SELECT"===s?r:null;if(!c)throw new Error("@signal can only be applied to a form control element, \nsuch as <input/>, <textarea/> or <select/>.  Element ``"+n+"'' is \nnot a recognized control.  Perhaps you applied it to the wrong node?");return c()})}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,htmlliterals)}(function(e,t){function n(){for(var t,n;t=document.querySelector("script[type='"+s+"']");)t.type+="-processed",n=t.src?i(t.src):e.data(t.textContent||t.innerText||t.innerHTML),a.push(new o(t,n))}function r(e){var n=t.preprocess(e.source(),u),r=document.createElement("script"),i=e.el.parentNode,o=e.el.nextSibling;r.type="text/javascript",r.src="data:text/javascript;charset=utf-8,"+escape(n),r.async=e.el.async,r.defer=e.el.defer,o?i.insertBefore(r,o):i.appendNode(r)}function i(t){var n=e.data(void 0),r=new window.XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){if(r.readyState===c){if(r.status<200||r.status>=300)throw new Error("surplus.js: error fetching file:"+t);n(r.responseText)}},r.send(),n}function o(e,t){this.el=e,this.source=t}var s="text/javascript-htmlliterals",u=window.surplus||{},c=4,a=e.array([]),l=0;e(function(){for(;l<a().length&&void 0!==a()[l].source();l++)r(a()[l])}),n()});