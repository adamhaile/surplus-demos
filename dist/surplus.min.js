!function(){"use strict";function n(n){return function(){for(var e=0;e<n.length;e++)n[e]()}}function e(n,e){var t=n.freecount?n.freeslots[--n.freecount]:n.count++,r=e.count++;n.nodes[t]=e,n.nodeslots[t]=r,e.sources[r]=n,e.sourceslots[r]=t}function t(n,t){n.log||(n.log=new x),e(n.log,t)}function r(n,t){n.log||(n.log=new x),e(n.log,t)}function o(n,e){if(e.preclocks){if(e.preclocks.ages[n.id]===e.age)return}else e.preclocks=new k;e.preclocks.ages[n.id]=e.age,e.preclocks.clocks[e.preclocks.count++]=n}function i(n,e,t){var r=e.preclocks||(e.preclocks=new E),o=t.preclocks||(t.preclocks=new k);if(o.ages[n.id]!==t.age){o.ages[n.id]=t.age,o.uclocks[o.ucount]=e,o.uclockids[o.ucount++]=n.id;var i=r.clockcounts[n.id];i?r.clockcounts[n.id]++:(void 0===i&&(r.ids[r.count++]=n.id),r.clockcounts[n.id]=1,r.clocks[n.id]=n)}}function s(){A.subclocks.reset(),A.updates.reset(),A.subtime++;try{c(A)}finally{N=M=j=null}}function u(n){N=A,A.changes.reset(),A.subclocks.reset(),A.updates.reset();try{n.value=n.fn(n.value),(A.changes.count>0||A.subclocks.count>0||A.updates.count>0)&&(A.subtime++,c(A))}finally{N=M=j=null}}function c(n){var e=N,t=0;for(N=n,n.disposes.reset();0!==n.changes.count||0!==n.subclocks.count||0!==n.updates.count||0!==n.disposes.count;)if(t>0&&n.subtime++,n.changes.run(a),n.subclocks.run(p),n.updates.run(h),n.disposes.run(g),t++>1e5)throw new Error("Runaway clock detected");N=e}function a(n){n.value=n.pending,n.pending=T,n.log&&l(n.log)}function l(n){for(var e,t,r=n.nodes,o=n.nodeslots,i=0,s=0;s<n.count;s++){var u=r[s];if(u){var c=u.clock.time();u.age<c&&(d(u.clock),u.age=c,u.state=S,u.clock.updates.add(u),u.owned&&f(u.owned),u.log&&l(u.log)),i&&(e=s-i,t=o[s],r[s]=null,r[e]=u,o[e]=t,u.sourceslots[t]=e)}else i++}n.count-=i,n.freecount=0}function f(n){for(var e=0;e<n.length;e++){var t=n[e];t.age=t.clock.time(),t.state=H,t.owned&&f(t.owned)}}function d(n){var e=0;(n.parent&&n.age<(e=n.parent.time())||n.state===H)&&(n.parent&&(n.age=e,d(n.parent),n.parent.subclocks.add(n)),n.changes.reset(),n.subclocks.reset(),n.updates.reset(),n.state=S)}function p(n){var e=n.parent.time();if(n.age<e||n.state===S){if(n.age<e&&(n.state=H),n.preclocks)for(var t=0;t<n.preclocks.ids.length;t++){var r=n.preclocks.clocks[n.preclocks.ids[t]];r&&p(r)}n.age=e}if(n.state===L)throw new Error("clock circular reference");n.state===S&&(n.state=L,c(n),n.state=H)}function h(n){if(n.state===S){var e=M,t=j,r=N;M=j=n,N=n.clock,n.state=L,m(n,!1),n.value=n.fn(n.value),n.state=H,M=e,j=t,N=r}}function m(n,e){var t,r,o,i=n.sources,s=n.sourceslots,u=n.cleanups,c=n.owned,a=n.preclocks;if(u){for(t=0;t<u.length;t++)u[t](e);n.cleanups=null}if(c){for(t=0;t<c.length;t++)g(c[t]);n.owned=null}for(t=0;t<n.count;t++)r=i[t],o=s[t],r.nodes[o]=null,r.freeslots[r.freecount++]=o,i[t]=null;if(n.count=0,a){for(t=0;t<a.count;t++)a.clocks[t]=null;for(a.count=0,t=0;t<a.ucount;t++){var l=a.uclocks[t].preclocks,f=a.uclockids[t];0===--l.clockcounts[f]&&(l.clocks[f]=null)}a.ucount=0}}function g(n){n.fn=null,n.log=null,n.preclocks=null,m(n,!0)}var v=function(n,e){var t=M,s=N||A,c=j;if(!t)throw new Error("all computations must be created under a parent computation or root");var a=new b(s,n,e);return M=j=a,N?a.value=a.fn(a.value):u(a),t!==q&&(t.owned||(t.owned=[])).push(a),M=t,j=c,function(){if(j){for(var n=N,e=a.clock;n.depth>e.depth+1;)n=n.parent;if(n===e||n.parent===e){if(a.preclocks)for(var t=0;t<a.preclocks.count;t++){var s=a.preclocks.clocks[t];p(s)}if(a.age===a.clock.time()){if(a.state===L)throw new Error("circular dependency");h(a)}if(a.preclocks)for(var t=0;t<a.preclocks.count;t++){var s=a.preclocks.clocks[t];n===e?o(s,j):i(s,n,j)}}else{for(n.depth>e.depth&&(n=n.parent);e.depth>n.depth+1;)e=e.parent;if(e.parent===n)o(e,j);else{for(e.depth>n.depth&&(e=e.parent);n.parent!==e.parent;)n=n.parent,e=e.parent;i(e,n,j)}p(e)}r(a,j)}return a.value}};v.root=function R(n){var e=M,R=0===n.length?q:new b(N||A,null,null),t=void 0;M=R;try{t=0===n.length?n():n(function(){N?(d(R.clock),R.clock.disposes.add(R)):g(R)})}finally{M=e}return t},v.on=function O(e,t,r,o){function O(n){var r=j;return e(),o?o=!1:(j=null,n=t(n),j=r),n}return Array.isArray(e)&&(e=n(e)),o=!!o,v(O,r)},v.data=function(n){var e=new w(N||A,n);return function(n){var r=N,u=e.clock;if(N){for(;r.depth>u.depth;)r=r.parent;for(;u.depth>r.depth&&u.parent!==r;)u=u.parent;if(u.parent!==r)for(;r.parent!==u.parent;)r=r.parent,u=u.parent;r!==u&&p(u)}var c=r===u?u:u.parent;if(arguments.length>0){if(N)if(e.pending!==T){if(n!==e.pending)throw new Error("conflicting changes: "+n+" !== "+e.pending)}else d(c),e.pending=n,c.changes.add(e);else e.log?(e.pending=n,A.changes.add(e),s()):e.value=n;return n}return j&&(t(e,j),u.parent===r?o(u,j):u!==r&&i(u,r,j)),e.value}},v.value=function(n,e){var t=v.data(n),r=N||A,o=0;return function i(s){if(0===arguments.length)return t();var u=e?e(n,s):n===s;if(!u){var c=r.time();if(o===c)throw new Error("conflicting values: "+i+" is not the same as "+n);o=c,n=s,t(s)}return s}},v.freeze=function(n){var e=void 0;if(N)e=n();else{N=A,N.changes.reset();try{e=n(),s()}finally{N=null}}return e},v.sample=function(n){var e,t=j;return t?(j=null,e=n(),j=t):e=n(),e},v.cleanup=function(n){if(!M)throw new Error("S.cleanup() must be called from within an S() computation.  Cannot call it at toplevel.");(M.cleanups||(M.cleanups=[])).push(n)},v.subclock=function P(n){function P(n){var t=null,r=N;N=e,e.state=S;try{t=n(),e.subtime++,c(e)}finally{N=r}return t}var e=new y(N||A);return n?P(n):P};var y=function(){function n(e){this.parent=e,this.id=n.count++,this.state=H,this.subtime=0,this.preclocks=null,this.changes=new C,this.subclocks=new C,this.updates=new C,this.disposes=new C,e?(this.age=e.time(),this.depth=e.depth+1):(this.age=0,this.depth=0)}return n.prototype.time=function(){for(var n=this.subtime,e=this;e=e.parent;)n+=e.subtime;return n},n}();y.count=0;var w=function(){function n(n,e){this.clock=n,this.value=e,this.pending=T,this.log=null}return n}(),b=function(){function n(n,e,t){this.clock=n,this.fn=e,this.value=t,this.state=H,this.count=0,this.sources=[],this.sourceslots=[],this.log=null,this.preclocks=null,this.owned=null,this.cleanups=null,this.age=this.clock.time()}return n}(),x=function(){function n(){this.count=0,this.nodes=[],this.nodeslots=[],this.freecount=0,this.freeslots=[]}return n}(),k=function(){function n(){this.count=0,this.clocks=[],this.ages=[],this.ucount=0,this.uclocks=[],this.uclockids=[]}return n}(),E=function(){function n(){this.count=0,this.clockcounts=[],this.clocks=[],this.ids=[]}return n}(),C=function(){function n(){this.items=[],this.count=0}return n.prototype.reset=function(){this.count=0},n.prototype.add=function(n){this.items[this.count++]=n},n.prototype.run=function(n){for(var e=this.items,t=0;t<this.count;t++)n(e[t]),e[t]=null;this.count=0},n}(),T={},H=0,S=1,L=2,A=new y(null),N=null,j=null,M=null,q=new b(A,null,null);"object"==typeof module&&"object"==typeof module.exports?module.exports=v:"function"==typeof define?define([],function(){return v}):(eval||function(){})("this").S=v}(),function(n){"object"==typeof exports&&exports.__esModule?exports["default"]=n(require(S)):"object"==typeof module&&"object"==typeof module.exports?module.exports=n(require(S)):"function"==typeof define?define(["S"],n):(eval||function(){})("this").SArray=n(S)}(function(n){"use strict";function e(e){function r(n){return arguments.length>0?(o(function(){e=n}),n):y()}function o(n){h[m++]=n,p(!0)}function i(){g&&e.splice(e.length-g,g),v&&e.splice(0,v),g=0,v=0;for(var n=0;m>n;n++)h[n](),h[n]=null;return m=0,e}function s(n){return o(function(){e.push(n)}),r}function u(){if(r(),g+v<e.length){var n=e[e.length-++g];return p(!0),n}}function c(n){return o(function(){e.unshift(n)}),r}function a(){if(r(),g+v<e.length){var n=e[v++];return p(!0),n}}function l(){var n=Array.prototype.slice.call(arguments);return o(function(){Array.prototype.splice.apply(e,n)}),r}function f(n){return o(function(){for(var t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}),r}function d(n){return o(function(){for(var t=0;t<e.length;)e[t]===n?e.splice(t,1):t++}),r}if(!Array.isArray(e))throw new Error("S.array must be initialized with an array");var p=n.data(!1),h=[],m=0,g=0,v=0,y=n.root(function(){return n.on(p,i,e,!0)});return r.push=s,r.pop=u,r.unshift=c,r.shift=a,r.splice=l,r.remove=f,r.removeAll=d,t(r)}function t(n){return n.concat=d,n.every=m,n.filter=f,n.find=u,n.forEach=o,n.includes=c,n.map=s,n.sort=a,n.reduce=p,n.reduceRight=h,n.reverse=v,n.slice=y,n.some=g,n.mapS=r,n.combine=i,n.orderBy=l,n.defer=w,n}function r(e,r,o){var i=this,s=[],u=[],c=e?[]:null,a=0,l=n(function(){var t,l,f,d,p,h,m=i(),g=m.length,v=new Array(g),y=e?new Array(g):null;o&&(t=[],l=[]);n:for(f=0,p=0;a>f;f++){for(h=s[f],d=0;g>d;d++,p=(p+1)%g)if(h===m[p]&&!v.hasOwnProperty(p)){v[p]=u[f],e&&(y[p]=c[f]),o&&f!==p&&(t.push(f),l.push(p)),p=(p+1)%g;continue n}r&&n.sample(function(){r(h,e?u[f]():u[f],f)}),e&&c[f]()}for(o&&t.length&&n.sample(function(){o(s,u,t,l)}),f=0;g>f;f++)v.hasOwnProperty(f)?(u[f]=v[f],e&&(c[f]=y[f])):(h=m[f],u[f]=e?function(t,r,o){return n.root(function(i){return e&&(c[o]=i),n(function(){return r=e(t,r,o)})})}(h,void 0,f):h);return n.cleanup(function(n){n&&e&&c.forEach(function(n){n()})}),a=u.length=g,s=m.slice(),u});return t(l)}function o(e,r,o){var i=this,s=[],u=0,c=n(function(){var t,c,a,l,f=i(),d=f.length,p=new Array(d),h=[],m=[];n:for(t=0,a=0;u>t;t++){for(l=s[t],c=0;d>c;c++,a=(a+1)%d)if(l===f[a]&&!p[a]){p[a]=!0,t!==a&&(h.push(t),m.push(a)),a=(a+1)%d;continue n}r&&r(l,t)}return o&&h.length&&o(h,m),e&&n.sample(function(){for(var n=0;d>n;n++)p[n]||e(f[n],n)}),u=d,s=f.slice()});return t(c)}function i(){var e=this;return t(n(function(){for(var n=e(),t=new Array(n.length),r=0;r<n.length;r++)t[r]=n[r]();return t}))}function s(n,e,t){var r=this.mapS(n,e,t);return n?r.combine():r}function u(e){var r=this;return t(n(function(){var n,t,o=r();for(n=0;n<o.length;n++)if(t=o[n],e(t))return t;return void 0}))}function c(e){var r=this;return t(n(function(){for(var n=r(),t=0;t<n.length;t++)if(n[t]===e)return!0;return!1}))}function a(e){var r=this;return t(n(function(){var n=r().slice(0);return e?n.sort(e):n.sort(),n}))}function l(e){var r,o=this;return"function"!=typeof e&&(r=e,e=function(n){return n[r]}),t(n(function(){var n=o().slice(0);return n.sort(function(n,t){return n=e(n),t=e(t),t>n?-1:n>t?1:0}),n}))}function f(e){var r=this;return t(n(function(){var n,t,o=r(),i=[];for(n=0;n<o.length;n++)t=o[n],e(t)&&i.push(t);return i}))}function d(){var e=this,r=Array.prototype.slice.call(arguments);return t(n(function(){for(var n=e(),t=0;t<r.length;t++)n=n.concat(r[t]());return n}))}function p(e,r){var o=this;return t(n(function(){for(var n=o(),t=r,i=0;i<n.length;i++)t=e(t,n[i],i,n);return t}))}function h(e,r){var o=this;return t(n(function(){for(var n=o(),t=r,i=n.length-1;i>=0;i--)t=e(t,n[i],i,n);return t}))}function m(e){var r=this;return t(n(function(){for(var n=r(),t=0;t<n.length;t++)if(!e(n[t]))return!1;return!0}))}function g(e){var r=this;return t(n(function(){var n=r();if(void 0===e)return 0!==n.length;for(var t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}))}function v(){var e=this;return t(n(function(){var n=e().slice(0);return n.reverse(),n}))}function y(e,r){var o=this;return t(n(function(){return o().slice(e,r)}))}function w(e){return t(n.defer(e).S(this))}return e}),function(n){var e={},t={};n(function(n,t,r){if(e.hasOwnProperty(n))throw new Error("define: cannot redefine module "+n);e[n]=r.apply(null,t.map(function(t){if(!e.hasOwnProperty(t))throw new Error("define: module "+t+" required by "+n+" has not been defined.");return e[t]}))}),"object"==typeof exports?t=exports:"function"==typeof define?define([],function(){return t}):t=this.htmlliterals=this.htmlliterals||t,t.preprocess=e.preprocess}(function(n){"use strict";n("sourcemap",[],function(){function n(n){return"\x00"+n.line+","+n.col+"\x00"}function e(){return"\x00\x00"}function t(n){var e="",t=0,r=0,o=0,i=!1,c=0,a=!1,l=n.replace(u.locs,function(n,u,l,f,d,p,h){if(u)return e+=";",i?(e+="AA"+s(1)+s(0-o),r++,o=0,a=!0):a=!1,c=h+u.length,t=0,u;if(l){var m=h-c;return f=parseInt(f),d=parseInt(d),e+=(a?",":"")+s(m-t)+"A"+s(f-r)+s(d-o),i=!0,a=!0,t=m,r=f,o=d,""}return p?(i=!1,""):void 0});return{src:l,mappings:e}}function r(n,e){var r=t(n),i=o(r.mappings,e);return{src:r.src,map:i}}function o(n,e){return{version:3,file:"out.js",sources:["in.js"],sourcesContent:[e],names:[],mappings:n}}function i(n,e){var t=r(n,e),o=t.src+"\n//# sourceMappingURL=data:"+encodeURIComponent(JSON.stringify(t.map));return o}function s(n){var e,t="";for(n=0>n?(-n<<1)+1:n<<1,n=n.toString(32),e=n.length-1;e>0;e--)t+=a[parseInt(n[e],32)];return t+=c[parseInt(n[0],32)]}var u={locs:/(\n)|(\u0000(\d+),(\d+)\u0000)|(\u0000\u0000)/g},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdef",a="ghijklmnopqrstuvwxyz0123456789+/";return{segmentStart:n,segmentEnd:e,extractMap:r,appendMap:i}}),n("tokenize",[],function(){var n={tokens:/<\/?(?=\w)|\/?>|<!--|-->|@|=|\)|\(|\[|\]|\{|\}|"|'|\/\/|\n|\/\*|\*\/|(?:[^<>@=\/@=()[\]{}"'\n*-]|(?!-->)-|\/(?![>\/*])|\*(?!\/)|(?!<\/?\w|<!--)<\/?)+/g};return function(e){var t=e.match(n.tokens);if(t.join("")!==e)throw new Error("tokenize failure");return t}}),n("AST",[],function(){return{CodeTopLevel:function(n){this.segments=n},CodeText:function(n,e){this.text=n,this.loc=e},EmbeddedCode:function(n){this.segments=n},HtmlLiteral:function(n){this.nodes=n},HtmlElement:function(n,e,t,r,o){this.beginTag=n,this.properties=e,this.mixins=t,this.content=r,this.endTag=o},HtmlText:function(n){this.text=n},HtmlComment:function(n){this.text=n},HtmlInsert:function(n){this.code=n},Property:function(n,e){this.name=n,this.code=e},Mixin:function(n){this.code=n}}}),n("parse",["AST"],function(n){var e={propertyLeftSide:/\s(\S+)\s*=\s*$/,stringEscapedEnd:/[^\\](\\\\)*\\$/,ws:/^\s*$/,leadingWs:/^\s+/,codeTerminator:/^[\s<>\/,;)\]}]/,codeContinuation:/^[^\s<>\/,;)\]}]+/,tagTrailingWs:/\s+(?=\/?>$)/,emptyLines:/\n\s+(?=\n)/g},t={"(":")","[":"]","{":"}"};return function(r,o,i){function s(){for(var e=[],t="",r=A();!q;)k("<")||k("<!--")||k("@")?(t&&e.push(new n.CodeText(t,r)),t="",e.push(u()),r=A()):k('"')||k("'")?t+=v():k("//")?t+=y():k("/*")?t+=w():(t+=R,b());return t&&e.push(new n.CodeText(t,r)),new n.CodeTopLevel(e)}function u(){E("<")&&E("<!--")&&E("@")&&x("not at start of html expression");for(var e,t,r=[];!q;)if(k("<"))r.push(c());else if(k("<!--"))r.push(f());else if(k("@"))r.push(d());else{if(e=N(),t=l(),q||!(k("<")||k("<!--")||k("@"))){j(e);break}r.push(t)}return new n.HtmlLiteral(r)}function c(){E("<")&&x("not at start of html element");var t=A(),r="",o=[],i=[],s=[],u="",l=!0;for(r+=R,b();!q&&E(">")&&E("/>");)k("@")?i.push(h()):k("=")?r=p(r,o):(r+=R,b());if(q&&x("unterminated start node",t),l=k(">"),r+=R,b(),r=r.replace(e.tagTrailingWs,"").replace(e.emptyLines,""),l){for(;!q&&E("</");)s.push(k("<")?c():k("@")?d():k("<!--")?f():a());for(q&&x("element missing close tag",t);!q&&E(">");)u+=R,b();q&&x("eof while looking for element close tag"),u+=R,b()}return new n.HtmlElement(r,o,i,s,u)}function a(){for(var e="";!q&&E("<")&&E("<!--")&&E("@")&&E("</");)e+=R,b();return new n.HtmlText(e)}function l(){for(var e="";!q&&H();)e+=R,b();return new n.HtmlText(e)}function f(){E("<!--")&&x("not in HTML comment");for(var e="";!q&&E("-->");)e+=R,b();return q&&x("unterminated html comment"),e+=R,b(),new n.HtmlComment(e)}function d(){return E("@")&&x("not at start of code insert"),b(),new n.HtmlInsert(m())}function p(t,r){E("=")&&x("not at equals sign of a property assignment");var o,i;return t+=R,b(),H()&&(t+=R,b()),o=e.propertyLeftSide.exec(t),o&&(k('"')||k("'")?t+=v():(t=t.substring(0,t.length-o[0].length),i=o[1],L(e.leadingWs),r.push(new n.Property(i,m())))),t}function h(){return E("@")&&x("not at start of mixin"),b(),new n.Mixin(m())}function m(){for(var t=A(),r=[],o="",i=A();!q&&!C(e.codeTerminator);)S()?o=g(r,o,i):o+=k("'")||k('"')?v():L(e.codeContinuation);return o&&r.push(new n.CodeText(o,i)),0===r.length&&x("not in embedded code",t),new n.EmbeddedCode(r)}function g(e,t,r){var o=A(),i=S();for(void 0===i&&x("not in parentheses"),t+=R,b();!q&&E(i);)k("'")||k('"')?t+=v():k("//")?t+=y():k("/*")?t+=w():k("<")||k("<!--")||k("@")?(t&&e.push(new n.CodeText(t,{line:r.line,col:r.col})),t="",e.push(u()),r.line=O,r.col=P):S()?t=g(e,t,r):(t+=R,b());return q&&x("unterminated parentheses",o),t+=R,b(),t}function v(){E("'")&&E('"')&&x("not in quoted string");var n,t;for(n=t=R,b();!q&&(E(n)||e.stringEscapedEnd.test(t));)t+=R,b();return q&&x("unterminated string"),t+=R,b(),t}function y(){E("//")&&x("not in code comment");for(var n="";!q&&E("\n");)n+=R,b();return q||(n+=R,b()),n}function w(){E("/*")&&x("not in code comment");for(var n="";!q&&E("*/");)n+=R,b();return q&&x("unterminated multi-line comment"),n+=R,b(),n}function b(){"\n"===R?(O++,P=0,I++):R&&(P+=R.length,I+=R.length),++M>=r.length?(q=!0,R=null):R=r[M]}function x(n,e){e=e||A();var t=" at line "+e.line+" col "+e.col+": ``"+i.substr(e.pos,30).replace("\n","").replace("\r","")+"''";throw new Error(n+t)}function k(n){return R===n}function E(n){return R!==n}function C(n){return n.test(R)}function T(n){return n.exec(R)}function H(){return!!C(e.ws)}function S(){return t[R]}function L(n){var e=T(n);return e&&(e=e[0])?(P+=e.length,I+=e.length,R=R.substring(e.length),""===R&&b(),e):null}function A(){return{line:O,col:P,pos:I}}function N(){return{TOK:R,i:M,EOF:q,LINE:O,COL:P}}function j(n){R=n.TOK,M=n.i,q=n.EOF,O=n.LINE,P=n.COL}var M=0,q=0===r.length,R=!q&&r[M],O=0,P=0,I=0;return s()}}),n("genCode",["AST","sourcemap"],function(n,e){function t(n,e,t){return"var "+r(n)+" = "+r(e)+".childNodes["+t+"];"}function r(n){return"__"+(-1===n?"":n)}function o(n,e,t){var r,o=[],i=[],s=t+"    ";if(1===e.length)e[0].genCommands(n,o,i,-1,-1,0);else for(r=0;r<e.length;r++)e[r].genCommands(n,o,i,o.length,-1,r);return 0===i.length?null:"function (__) {"+s+o.join(s)+s+i.join(s)+s+"return __;"+t+"}"}function i(n,e,t,r){var o,i="";for(o=0;o<e.length;o++)o&&r&&(i+=r),i+=e[o][t](n,i);return i}function s(n){return"'"+n.replace(a.backslashes,"\\\\").replace(a.singleQuotes,"\\'").replace(a.newlines,"\\\n")+"'"}function u(n){var e=a.lastline.exec(n);return e=e?e[0]:"",e.replace(a.nonws," ")}function c(n){var e,t,r,o,i=0,s=0;for(e=0,t=n.length;t>e;e++)r=n.charCodeAt(e),o=31*i+r,i=0|o,r=(o-i)/l,s=31*s+r|0;return(1048575&s)*l+i}var a={backslashes:/\\/g,newlines:/\r?\n/g,singleQuotes:/'/g,firstline:/^[^\n]*/,lastline:/[^\n]*$/,nonws:/\S/g};n.CodeTopLevel.prototype.genCode=n.EmbeddedCode.prototype.genCode=function(n){return i(n,this.segments,"genCode")},n.CodeText.prototype.genCode=function(n){return(n.sourcemap?e.segmentStart(this.loc):"")+this.text+(n.sourcemap?e.segmentEnd():"")},n.HtmlLiteral.prototype.genCode=function(n,e){var t=i(n,this.nodes,"genHtml"),r=c(t),a="\r\n"+u(e),l=o(n,this.nodes,a),f=n.symbol+"("+r+","+a+s(t)+")";return l&&(f="("+l+")("+f+")"),f},n.HtmlElement.prototype.genHtml=function(n){return this.beginTag+i(n,this.content,"genHtml")+(this.endTag||"")},n.HtmlComment.prototype.genHtml=n.HtmlText.prototype.genHtml=function(){return this.text},n.HtmlInsert.prototype.genHtml=function(){return"<!-- insert -->"},n.HtmlElement.prototype.genCommands=function(n,e,r,o,i,s){for(var u=0;u<this.content.length;u++)this.content[u].genCommands(n,e,r,Math.max(o+1,e.length),o,u);for(u=0;u<this.properties.length;u++)this.properties[u].genCommand(n,r,o);for(u=0;u<this.mixins.length;u++)this.mixins[u].genCommand(n,r,o);(this.properties.length||this.mixins.length||e.length!==o)&&-1!==o&&(e[o]=t(o,i,s))},n.HtmlComment.prototype.genCommands=n.HtmlText.prototype.genCommands=function(){},n.HtmlInsert.prototype.genCommands=function(n,e,o,i,s,u){e[i]=t(i,s,u),o.push(n.symbol+".exec(function (state) { return Html.insert("+r(i)+", "+this.code.genCode(n)+", state); });")},n.Property.prototype.genCommand=function(n,e,t){var o=this.code.genCode(n);e.push(n.symbol+".exec(function () { "+r(t)+"."+this.name+" = "+o+"; });")},n.Mixin.prototype.genCommand=function(n,e,t){this.code.genCode(n);e.push(n.symbol+".exec(function (state) { return "+this.code.genCode(n)+"("+r(t)+", state); });")};var l=Math.pow(2,32)}),n("shims",["AST"],function(n){function e(){var n=document.createElement("ul");return n.innerHTML="    <li></li>",2===n.childNodes.length}function t(){s(n.HtmlText,function(e){!c.ws.test(this.text)||e.parent instanceof n.HtmlAttr||(this.text="&#xfeff;"+this.text)})}function r(){var n=document.createElement("ul");return n.innerHTML="<!-- --><li></li>",2===n.childNodes.length}function o(){s(n.HtmlComment,function(e){0===e.index&&u(new n.HtmlText("&#xfeff;"),e)})}function i(n,e){for(var t={index:0,parent:n,sibings:e};t.index<e.length;t.index++)e[t.index].shim(t)}function s(n,e){a=!0;var t=n.prototype.shim;n.prototype.shim=function(n){e.call(this,n),t.call(this,n)}}function u(n,e){e.siblings.splice(e.index,0,n),n.shim(e),e.index++}if(!this||!this.document)return!1;var c={ws:/^\s*$/},a=!1;return n.CodeTopLevel.prototype.shim=function(n){i(this,this.segments,n)},n.HtmlLiteral.prototype.shim=function(n){i(this,this.nodes,n)},n.HtmlElement.prototype.shim=function(n){i(this,this.content,n)},n.HtmlInsert.prototype.shim=function(n){i(this,this.segments,n)},n.CodeText.prototype.shim=n.HtmlText.prototype.shim=n.HtmlComment.prototype.shim=function(){},e()||t(),r()||o(),a}),n("preprocess",["tokenize","parse","shims","sourcemap"],function(n,e,t,r){return function(o,i){i=i||{},i.symbol=i.symbol||"Html",i.sourcemap=i.sourcemap||null;var s=n(o,i),u=e(s,i,o);t&&u.shim();var c,a=u.genCode(i);return c="extract"===i.sourcemap?r.extractMap(a,o,i):"append"===i.sourcemap?r.appendMap(a,o,i):a}})}),function(n){var e={},t="Html";n(function(n,t,r){if(e.hasOwnProperty(n))throw new Error("define: cannot redefine module "+n);e[n]=r.apply(null,t.map(function(t){if(!e.hasOwnProperty(t))throw new Error("define: module "+t+" required by "+n+" has not been defined.");return e[t]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=e[t]:"function"==typeof define?define([],function(){return e[t]}):this[t]=e[t]}(function(n){"use strict";n("domlib",[],function(){function n(){var n=document.createElement("div");return n.innerHTML='<div contentEditable="true"></div>',n.children[0].isContentEditable===!0}function e(){t.isContentEditable=function(n){var e=n.getAttribute("contentEditable");return"true"===e||""===e}}var t={addEventListener:function(n,e,t){n.addEventListener(e,t,!1)},removeEventListener:function(n,e,t){n.removeEventListener(e,t)},classListContains:function(n,e){return n.classList.contains(e)},classListAdd:function(n,e){return n.classList.add(e)},classListRemove:function(n,e){return n.classList.remove(e)},isContentEditable:function(n){return n.isContentEditable},isAttachedToDocument:function(n){return 0===(1&document.compareDocumentPosition(n))}};return n()||e(),t}),n("parse",[],function(){function n(n){var r=e.exec(n),o=r&&t[r[1].toLowerCase()]||"div";return"svg"===o?document.createElementNS("http://www.w3.org/2000/svg",o):document.createElement(o)}var e=/<(\w+)/,t={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html",svg:"svg",g:"svg",circle:"svg",elipse:"svg",rect:"svg",text:"svg",polyline:"svg",polygon:"svg",line:"svg",path:"svg"};return function(e){var t,r,o=n(e);if(o.innerHTML=e,t=o.childNodes.length,0===t){if(""===e)return document.createTextNode("");throw new Error("HTML parse failed for: "+e)}if(1===t)return o.childNodes[0];for(r=document.createDocumentFragment();0!==o.childNodes.length;)r.appendChild(o.childNodes[0]);return r.originalNodes=Array.prototype.slice.apply(r.childNodes),r}}),n("cachedParse",["parse"],function(n){var e={},t=11;return function(r,o){var i,s=e[r];return void 0===s&&(s=n(o),e[r]=s),i=s.cloneNode(!0),i.nodeType===t&&(i.originalNodes=Array.prototype.slice.call(i.childNodes)),i}}),n("Html",["parse","cachedParse","domlib"],function(n,e,t){function r(n,t){return e(n,t)}return r.exec=function(n){n()},r.cleanup=function(){},r.domlib=t,r}),n("Html.insert",["Html"],function(n){var e=11,t=3;n.insert=function r(o,i,s){function u(e){e instanceof Function?n.exec(function(){u(e())}):r(e)}function r(n){if(d=o.parentNode,!d)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+o+"'' is currently unattached to a parent.");if(s.parentNode!==d)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.");p=s,c(n),l(p,o)}function c(n){var r=p.nextSibling;null===n||void 0===n||(n.nodeType===e?0===n.childNodes.length&&n.originalNodes?a(n.originalNodes):(d.insertBefore(n,r),p=r.previousSibling):n.nodeType?(r!==n&&(r.nextSibling===n&&r!==n.nextSibling?d.removeChild(r):d.insertBefore(n,r)),p=n):Array.isArray(n)?a(n):(n=n.toString(),r.nodeType!==t?p=d.insertBefore(document.createTextNode(n),r):(r.data!==n&&(r.data=n),p=r)))}function a(n){var e,t,r;for(e=0,t=n.length;t>e;e++)c(n[e]),r&&3==r.nodeType&&r.nextSibling!==o&&3===r.nextSibling.nodeType&&d.insertBefore(document.createTextNode(" "),r.nextSibling),r=o.previousSibling}function l(n,e){if(n!==e)for(var t=n.nextSibling;t!==e;)d.removeChild(t),t=n.nextSibling}function f(n){return n.parentNode.insertBefore(document.createTextNode(""),n)}s=s||f(o);var d,p;return u(i),s}}),n("Html.attr",["Html"],function(n){n.attr=function(n,e){return function(t){t.setAttribute(n,e)}}}),n("Html.class",["Html"],function(n){n["class"]=function(e,t,r){return arguments.length<3&&(r=t,t=null),function(o,i){if(void 0===o.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+o+"'' does not. Perhaps you applied it to the wrong node?");if(r===i)return i;var s=n.domlib.classListContains(o,e),u=t&&n.domlib.classListContains(o,t);return r?(s||n.domlib.classListAdd(o,e),t&&u&&n.domlib.classListRemove(o,t)):(s&&n.domlib.classListRemove(o,e),t&&!u&&n.domlib.classListAdd(o,t)),r}}}),n("Html.focus",["Html"],function(n){function e(){i=!1;var e,s,u=0>r?t.textContent.length+r+1:r,c=0>o?t.textContent.length+o+1:o;t.focus(),isNaN(u)||(t.setSelectionRange?t.setSelectionRange(u,c):t.createTextRange?(e=t.createTextRange(),e.moveEnd("character",c),e.moveStart("character",u),e.select()):n.domlib.isContentEditable(t)&&t.childNodes.length>0&&(e=document.createRange(),e.setStart(t.childNodes[0],u),e.setEnd(t.childNodes[0],c),s=window.getSelection(),s.removeAllRanges(),s.addRange(e)))}var t=null,r=0/0,o=0/0,i=!1;n.focus=function(n,s,u){return s=arguments.length>1?s:0/0,u=arguments.length>2?u:s,function(c){if(!c.focus)throw new Error("@focus can only be applied to an element that has a .focus() method, like <input>, <select>, <textarea>, etc.");n?(t=c,r=s,o=u,i||window.requestAnimationFrame(e)):c.blur()}}}),n("Html.onkey",["Html"],function(n){n.onkey=function(t,r,o){function i(n){return n.keyCode!==u||c&&!n[c]||o(n),!0}arguments.length<3&&(o=r,r="down");var s=t.toLowerCase().split("-",2),u=e[s[s.length-1]],c=s.length>1?s[0]+"Key":null;if(void 0===u)throw new Error("@Html.onkey: unrecognized key identifier '"+t+"'");if("function"!=typeof o)throw new Error("@Html.onkey: must supply a function to call when the key is entered");return function(e){n.domlib.addEventListener(e,"key"+r,i),n.cleanup(e,function(){n.domlib.removeEventListener(e,"key"+r,i)})}};var e={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})}),function(n){"object"==typeof exports?n(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],n):n(S,Html)}(function(n,e){"use strict";e.exec=n,e.cleanup=function(e,t){n.cleanup(t)},e.data=function(t,r,o){return function(i){function s(){function o(){var e=n.sample(t),r=i.value;return e.toString()!==r&&t(r),!0}var s=r||"change";n(function(){i.value=t()}),e.domlib.addEventListener(i,s,o),n.cleanup(function(){e.domlib.removeEventListener(i,s,o)})}function u(){function s(){return t(i.checked?u:c),!0}var u=void 0===r?!0:r,c=void 0===o?u===!0?!1:null:o;n(function(){i.checked=t()===u}),e.domlib.addEventListener(i,"change",s),n.cleanup(function(){e.domlib.removeEventListener(i,"change",s)})}function c(){function o(){return i.checked&&t(s),!0}var s=void 0===r?!0:r;n(function(){i.checked=t()===s}),e.domlib.addEventListener(i,"change",o),n.cleanup(function(){e.domlib.removeEventListener(i,"change",o)})}function a(){function o(){var e=n.sample(t),r=i.textContent;return e.toString()!==r&&t(r),!0}var s=r||"input";n(function(){i.textContent=t()}),e.domlib.addEventListener(i,s,o),n.cleanup(function(){e.domlib.removeEventListener(i,s,o)})}var l=i.nodeName,f=i.type&&i.type.toUpperCase(),d="INPUT"===l?"TEXT"===f?s:"RADIO"===f?c:"CHECKBOX"===f?u:null:"TEXTAREA"===l?s:"SELECT"===l?s:e.domlib.isContentEditable(i)?a:null;if(!d)throw new Error("@data can only be applied to a form control element, \nsuch as <input/>, <textarea/> or <select/>, or to an element with 'contentEditable' set.  Element ``"+l+"'' is \nnot such an element.  Perhaps you applied it to the wrong node?");return d()}},e.animationFrame=function(n){function e(){o=Array.prototype.slice.apply(arguments),r||(r=!0,requestAnimationFrame(t))}function t(){r=!1,n.apply(null,o)}var r=!1,o=null;return e}}),function(n){"object"==typeof exports?n(require("S"),require("SArray"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","SArray","htmlliterals-runtime"],n):n(S,SArray,htmlliterals)}(function(n,e,t){function r(){for(var e,t;e=document.querySelector("script[type='"+u+"']");)e.type+="-processed",t=e.src?i(e.src):n.data(e.textContent||e.innerText||e.innerHTML),l.push(new s(e,t))}function o(n){var e=t.preprocess(n.source(),c),r=document.createElement("script"),o=n.el.parentNode,i=n.el.nextSibling;r.type="text/javascript",r.src="data:text/javascript;charset=utf-8,"+escape(e),r.async=n.el.async,r.defer=n.el.defer,i?o.insertBefore(r,i):o.appendNode(r)}function i(e){var t=n.data(void 0),r=new window.XMLHttpRequest;return r.open("GET",e,!0),r.onreadystatechange=function(){if(r.readyState===a){if(r.status<200||r.status>=300)throw new Error("surplus.js: error fetching file:"+e);t(r.responseText)}},r.send(),t}function s(n,e){this.el=n,this.source=e}var u="text/javascript-htmlliterals",c=window.surplus||{},a=4,l=e([]),f=0;n.root(function(){return n(function(){for(;f<l().length&&void 0!==l()[f].source();f++)o(l()[f])})}),r()});