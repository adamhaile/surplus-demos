!function(){"use strict";function e(e,t){var n;f++,d=1;try{n=t(),d>1&&r(null)}finally{p=null,d=0}return n}function t(e){function t(){s!==f&&(o=!1,s=f+1,d?h[d++]=i:n(i))}var r,i=new x(null),o=!1,s=0;return i.emitter=new E(null),function(n){return s===f?!0:("function"==typeof r?r():o||(o=!0,r=e(t)),l(i.emitter,n),!1)}}function n(e){try{r(e)}finally{d=0,p=null,m=!1,g=!1}}function r(e){var t,n,r,o=0;if(d||(d=1),e&&(f++,i(e.emitter),s(e.emitter),n=-1,r=v.length,r)){for(;++n<r;)v[n].dispose();v=[]}for(;1!==d;){for(f++,t=h,h=w,w=t,r=d,d=1,n=0;++n<r;)e=t[n],e.value=e.pending,e.pending=void 0,e.emitter&&i(e.emitter);for(n=0;++n<r;)e=t[n],e.emitter&&s(e.emitter),t[n]=null;if(n=-1,r=v.length){for(;++n<r;)v[n].dispose();v=[]}if(o++>1e5)throw new Error("Runaway frames detected")}}function i(e){var t,n,r,s,u=e.edges,c=-1,a=u.length;for(e.emitting=!0;++c<a;)if(t=u[c],t&&(!t.boundary||t.to.node.gate(t.to.node))){if(n=t.to,r=n.node,s=r.emitter,0!==n.marks&&n.age<f&&(n.marks=0,s&&(s.emitting=!1)),s&&s.emitting)throw new Error("circular dependency");t.marked=!0,n.marks++,n.age=f,1===n.marks&&(r.children&&o(r.children),s&&i(s))}e.emitting=!1}function o(e){for(var t,n=-1,r=e.length;++n<r;)t=e[n],t.fn=null,t.children&&o(t.children)}function s(e){for(var t,n,r=-1,i=e.edges.length;++r<i;)t=e.edges[r],t&&t.marked&&(n=t.to,t.marked=!1,n.marks--,0===n.marks&&u(n.node));e.fragmented()&&e.compact()}function u(e){var t,n,r,i,o=e.emitter,s=e.receiver,a=null===e.fn;if(p=e,c(e),e.cleanup(a),a||(e.value=e.fn()),o){for(t=-1,n=o.edges.length;++t<n;)r=o.edges[t],r&&r.marked&&(i=r.to,r.marked=!1,i.marks--,0===i.marks&&u(i.node));a?o.detach():o.fragmented()&&o.compact()}if(s)if(a)s.detach();else{for(t=-1,n=s.edges.length;++t<n;)r=s.edges[t],r.active&&r.age<f&&r.deactivate();s.fragmented()&&s.compact()}}function c(e){if(e.children){for(var t,n=-1,r=e.children.length;++n<r;)t=e.children[n],(!t.receiver||t.receiver.age<f)&&(c(t),t.dispose());e.children=null}}function a(e){function t(e){for(var n,r=-1,i=e.edges.length;++r<i;)n=e.edges[r],n&&n.marked&&(n.from.node&&n.from.node.receiver.marks?t(n.from.node.receiver):s(n.from))}var n=p,r=m;t(e),p=n,m=r}function l(e,t){var n=null;t.receiver?n=t.receiver.index[e.id]:t.receiver=new C(t),n?n.activate(e):new T(e,t.receiver,t.gate&&(null===e.node||t.gate!==e.node.gate))}var f=1,d=0,h=[],p=null,m=!1,g=!1,v=[],y=function(n,r){var i=p,o=r&&r.async&&t(r.async)||i&&i.gate||null,s=new b(n,o);return!i||r&&r.toplevel||(i.children||(i.children=[])).push(s),p=s,s.value=d?n():e(s,n),p=i,function(){return g?d?v.push(s):s.dispose():p&&s.fn&&(s.receiver&&0!==s.receiver.marks&&s.receiver.age===f&&a(s.receiver),m||(s.emitter||(s.emitter=new E(s)),l(s.emitter,p))),s.value}};y.data=function(e){var t=new x(e);return function(e){if(arguments.length>0){if(d)if(t.age===f){if(e!==t.pending)throw new Error("conflicting changes: "+e+" !== "+t.pending)}else t.age=f,t.pending=e,h[d++]=t;else t.age=f,t.value=e,t.emitter&&n(t);return e}return p&&!m&&(t.emitter||(t.emitter=new E(null)),l(t.emitter,p)),t.value}},y.sum=function(e){var t=new x(e);return function(r){return arguments.length>0?(d?t.age===f?t.pending=r(t.pending):(t.age=f,t.pending=r(t.value),h[d++]=t):(t.age=f,t.value=r(t.value),t.emitter&&n(t)),e):(p&&!m&&(t.emitter||(t.emitter=new E(null)),l(t.emitter,p)),t.value)}},y.on=function H(e,t,n,r){function H(){return"function"==typeof e?e():o(),s?s=!1:y.sample(i),n}function i(){n=t(n)}function o(){for(var t=0;t<e.length;t++)e[t]()}var s=!0;return y(H,r)},y.event=function(e){var t;if(d)t=e();else{d=1;try{t=e(),n(null)}finally{d=0}}return t},y.sample=function(e){var t;return p&&!m?(m=!0,t=e(),m=!1):t=e(),t},y.dispose=function(e){if(g)e();else{g=!0;try{e()}finally{g=!1}}},y.cleanup=function(e){if(!p)throw new Error("S.cleanup() must be called from within an S() computation.  Cannot call it at toplevel.");(p.cleanups||(p.cleanups=[])).push(e)};var w=[],x=function(){function e(e){this.value=e,this.age=0,this.emitter=null}return e}(),b=function(){function e(e,t){this.fn=e,this.gate=t,this.emitter=null,this.receiver=null,this.children=null,this.cleanups=null}return e.prototype.dispose=function(){if(this.fn){if(this.fn=null,this.gate=null,this.children)for(var e=-1,t=this.children.length;++e<t;)this.children[e].dispose();this.cleanup(!0),this.receiver&&this.receiver.detach(),this.emitter&&this.emitter.detach()}},e.prototype.cleanup=function(e){if(this.cleanups){for(var t=-1,n=this.cleanups.length;++t<n;)this.cleanups[t](e);this.cleanups=null}},e}(),E=function(){function e(t){this.node=t,this.id=e.count++,this.emitting=!1,this.edges=[],this.index=[],this.active=0,this.edgesAge=0}return e.prototype.detach=function(){for(var e,t=-1,n=this.edges.length;++t<n;)e=this.edges[t],e&&e.deactivate()},e.prototype.fragmented=function(){return this.edges.length>10&&this.edges.length/this.active>4},e.prototype.compact=function(){for(var e,t=-1,n=this.edges.length,r=[],i=++this.edgesAge;++t<n;)e=this.edges[t],e&&(e.slot=r.length,e.slotAge=i,r.push(e));this.edges=r},e.count=0,e}(),C=function(){function e(e){this.node=e,this.id=E.count++,this.marks=0,this.age=f,this.edges=[],this.index=[],this.active=0}return e.prototype.detach=function(){for(var e=-1,t=this.edges.length;++e<t;)this.edges[e].deactivate()},e.prototype.fragmented=function(){return this.edges.length>10&&this.edges.length/this.active>4},e.prototype.compact=function(){for(var e,t=-1,n=this.edges.length,r=[],i=[];++t<n;)e=this.edges[t],e.active&&(r.push(e),i[e.from.id]=e);this.edges=r,this.index=i},e.count=0,e}(),T=function(){function e(e,t,n){this.from=e,this.to=t,this.boundary=n,this.age=f,this.active=!0,this.marked=!1,this.slot=e.edges.length,this.slotAge=e.edgesAge,e.edges.push(this),t.edges.push(this),t.index[e.id]=this,e.active++,t.active++}return e.prototype.activate=function(e){this.active||(this.active=!0,this.slotAge===e.edgesAge?e.edges[this.slot]=this:(this.slotAge=e.edgesAge,this.slot=e.edges.length,e.edges.push(this)),this.to.active++,e.active++,this.from=e),this.age=f},e.prototype.deactivate=function(){if(this.active){var e=this.from,t=this.to;this.active=!1,e.edges[this.slot]=null,e.active--,t.active--,this.from=null}},e}();"object"==typeof module&&"object"==typeof module.exports?module.exports=y:"function"==typeof define?define([],function(){return y}):(eval||function(){})("this").S=y}(),function(e){"object"==typeof exports?e(require("S")):"function"==typeof define?define(["S"],e):e(S)}(function(e){"use strict";function t(t){function r(e){return arguments.length>0?(t=e,f(e)):f()}function i(e){return t.push(e),f(t),r}function o(){var e=t.pop();return f(t),e}function s(e){return t.unshift(e),f(t),r}function u(){var e=t.shift();return f(t),e}function c(){return Array.prototype.splice.apply(t,arguments),f(t),r}function a(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}return f(t),r}function l(e){for(var n=0;n<t.length;)t[n]===e?t.splice(n,1):n++;return f(t),r}if(!Array.isArray(t))throw new Error("S.array must be initialized with an array");var f=e.data(t);return r.pop=o,r.push=i,r.shift=u,r.splice=c,r.unshift=s,r.remove=a,r.removeAll=l,n(r)}function n(e){return e.concat=d,e.every=m,e.filter=f,e.find=u,e.forEach=i,e.includes=c,e.map=s,e.sort=a,e.reduce=h,e.reduceRight=p,e.reverse=v,e.slice=y,e.some=g,e.mapS=r,e.combine=o,e.orderBy=l,e.async=w,e}function r(t){var r=this,i=[],o=[],s=0,u=e(function(){var n,u,c,a,l=r(),f=l.length,d=new Array(f);e:for(n=0,c=0;s>n;n++){for(a=o[n],u=0;f>u;u++,c=(c+1)%f)if(i[n]===l[c]&&!d.hasOwnProperty(c)){d[c]=a,c=(c+1)%f;continue e}e.dispose(a)}for(n=0;f>n;n++)d.hasOwnProperty(n)?o[n]=d[n]:(a=l[n],o[n]=function(n,r){return e(function(){return t(n,r)},{toplevel:!0})}(a,n));return e.cleanup(function(t){t&&o.map(e.dispose)}),s=o.length=f,i=l.slice(),o});return n(u)}function i(t,r,i){var o=this,s=[],u=0,c=e(function(){var n,c,a,l,f=o(),d=f.length,h=new Array(d),p=[],m=[];e:for(n=0,a=0;u>n;n++){for(l=s[n],c=0;d>c;c++,a=(a+1)%d)if(l===f[a]&&!h[a]){h[a]=!0,n!==a&&(p.push(n),m.push(a)),a=(a+1)%d;continue e}r&&r(l,n)}return i&&p.length&&i(p,m),t&&e.sample(function(){for(var e=0;d>e;e++)h[e]||t(f[e],e)}),u=d,s=f.slice()});return n(c)}function o(){var t=this;return n(e(function(){for(var e=t(),n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r]();return n}))}function s(e,t,n){var r=this.mapS(e,t,n);return e?r.combine():r}function u(t){var r=this;return n(e(function(){var e,n,i=r();for(e=0;e<i.length;e++)if(n=i[e],t(n))return n;return void 0}))}function c(t){var r=this;return n(e(function(){for(var e=r(),n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}))}function a(t){var r=this;return n(e(function(){var e=r().slice(0);return t?e.sort(t):e.sort(),e}))}function l(t){var r,i=this;return"function"!=typeof t&&(r=t,t=function(e){return e[r]}),n(e(function(){var e=i().slice(0);return e.sort(function(e,n){return e=t(e),n=t(n),n>e?-1:e>n?1:0}),e}))}function f(t){var r=this;return n(e(function(){var e,n,i=r(),o=[];for(e=0;e<i.length;e++)n=i[e],t(n)&&o.push(n);return o}))}function d(){var t=this,r=Array.prototype.slice.call(arguments);return n(e(function(){for(var e=t(),n=0;n<r.length;n++)e=e.concat(r[n]());return e}))}function h(t,r){var i=this;return n(e(function(){for(var e=i(),n=r,o=0;o<e.length;o++)n=t(n,e[o],o,e);return n}))}function p(t,r){var i=this;return n(e(function(){for(var e=i(),n=r,o=e.length-1;o>=0;o--)n=t(n,e[o],o,e);return n}))}function m(t){var r=this;return n(e(function(){for(var e=r(),n=0;n<e.length;n++)if(!t(e[n]))return!1;return!0}))}function g(t){var r=this;return n(e(function(){var e=r();if(void 0===t)return 0!==e.length;for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}))}function v(){var t=this;return n(e(function(){var e=t().slice(0);return e.reverse(),e}))}function y(t,r){var i=this;return n(e(function(){return i().slice(t,r)}))}function w(t){return n(e.async(t).S(this))}e.array=t}),function(e){var t={},n={};e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof exports?n=exports:"function"==typeof define?define([],function(){return n}):n=this.htmlliterals=this.htmlliterals||n,n.preprocess=t.preprocess}(function(e){"use strict";e("sourcemap",[],function(){function e(e){return"\x00"+e.line+","+e.col+"\x00"}function t(){return"\x00\x00"}function n(e){var t="",n=0,r=0,i=0,o=!1,c=0,a=!1,l=e.replace(u.locs,function(e,u,l,f,d,h,p){if(u)return t+=";",o?(t+="AA"+s(1)+s(0-i),r++,i=0,a=!0):a=!1,c=p+u.length,n=0,u;if(l){var m=p-c;return f=parseInt(f),d=parseInt(d),t+=(a?",":"")+s(m-n)+"A"+s(f-r)+s(d-i),o=!0,a=!0,n=m,r=f,i=d,""}return h?(o=!1,""):void 0});return{src:l,mappings:t}}function r(e,t){var r=n(e),o=i(r.mappings,t);return{src:r.src,map:o}}function i(e,t){return{version:3,file:"out.js",sources:["in.js"],sourcesContent:[t],names:[],mappings:e}}function o(e,t){var n=r(e,t),i=n.src+"\n//# sourceMappingURL=data:"+encodeURIComponent(JSON.stringify(n.map));return i}function s(e){var t,n="";for(e=0>e?(-e<<1)+1:e<<1,e=e.toString(32),t=e.length-1;t>0;t--)n+=a[parseInt(e[t],32)];return n+=c[parseInt(e[0],32)]}var u={locs:/(\n)|(\u0000(\d+),(\d+)\u0000)|(\u0000\u0000)/g},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdef",a="ghijklmnopqrstuvwxyz0123456789+/";return{segmentStart:e,segmentEnd:t,extractMap:r,appendMap:o}}),e("tokenize",[],function(){var e={tokens:/<\/?(?=\w)|\/?>|<!--|-->|@|=|\)|\(|\[|\]|\{|\}|"|'|\/\/|\n|\/\*|\*\/|(?:[^<>@=\/@=()[\]{}"'\n*-]|(?!-->)-|\/(?![>/*])|\*(?!\/)|(?!<\/?\w|<!--)<\/?)+/g};return function(t){var n=t.match(e.tokens);return n}}),e("AST",[],function(){return{CodeTopLevel:function(e){this.segments=e},CodeText:function(e,t){this.text=e,this.loc=t},EmbeddedCode:function(e){this.segments=e},HtmlLiteral:function(e){this.nodes=e},HtmlElement:function(e,t,n,r,i){this.beginTag=e,this.properties=t,this.mixins=n,this.content=r,this.endTag=i},HtmlText:function(e){this.text=e},HtmlComment:function(e){this.text=e},HtmlInsert:function(e){this.code=e},Property:function(e,t){this.name=e,this.code=t},Mixin:function(e){this.code=e}}}),e("parse",["AST"],function(e){var t={propertyLeftSide:/\s(\S+)\s*=\s*$/,stringEscapedEnd:/[^\\](\\\\)*\\$/,ws:/^\s*$/,leadingWs:/^\s+/,codeTerminator:/^[\s<>/,;)\]}]/,codeContinuation:/^[^\s<>/,;)\]}]+/,tagTrailingWs:/\s+(?=\/?>$)/,emptyLines:/\n\s+(?=\n)/g},n={"(":")","[":"]","{":"}"};return function(r){function i(){for(var t=[],n="",r=L();!R;)x("<")||x("<!--")||x("@")?(n&&t.push(new e.CodeText(n,r)),n="",t.push(o()),r=L()):x('"')||x("'")?n+=m():x("//")?n+=g():x("/*")?n+=v():(n+=j,y());return n&&t.push(new e.CodeText(n,r)),new e.CodeTopLevel(t)}function o(){b("<")&&b("<!--")&&b("@")&&w("not at start of html expression");for(var t,n,r=[];!R;)if(x("<"))r.push(s());else if(x("<!--"))r.push(a());else if(x("@"))r.push(l());else{if(t=k(),n=c(),R||!(x("<")||x("<!--")||x("@"))){N(t);break}r.push(n)}return new e.HtmlLiteral(r)}function s(){b("<")&&w("not at start of html element");var n=L(),r="",i=[],o=[],c=[],h="",p=!0;for(r+=j,y();!R&&b(">")&&b("/>");)x("@")?o.push(d()):x("=")?r=f(r,i):(r+=j,y());if(R&&w("unterminated start node",n),p=x(">"),r+=j,y(),r=r.replace(t.tagTrailingWs,"").replace(t.emptyLines,""),p){for(;!R&&b("</");)c.push(x("<")?s():x("@")?l():x("<!--")?a():u());for(R&&w("element missing close tag");!R&&b(">");)h+=j,y();R&&w("eof while looking for element close tag"),h+=j,y()}return new e.HtmlElement(r,i,o,c,h)}function u(){for(var t="";!R&&b("<")&&b("<!--")&&b("@")&&b("</");)t+=j,y();return new e.HtmlText(t)}function c(){for(var t="";!R&&T();)t+=j,y();return new e.HtmlText(t)}function a(){b("<!--")&&w("not in HTML comment");for(var t="";!R&&b("-->");)t+=j,y();return R&&w("unterminated html comment"),t+=j,y(),new e.HtmlComment(t)}function l(){return b("@")&&w("not at start of code insert"),y(),new e.HtmlInsert(h())}function f(n,r){b("=")&&w("not at equals sign of a property assignment");var i,o;return n+=j,y(),T()&&(n+=j,y()),i=t.propertyLeftSide.exec(n),i&&b('"')&&b("'")&&(n=n.substring(0,n.length-i[0].length),o=i[1],S(t.leadingWs),r.push(new e.Property(o,h()))),n}function d(){return b("@")&&w("not at start of mixin"),y(),new e.Mixin(h())}function h(){for(var n=L(),r=[],i="",o=L();!R&&!E(t.codeTerminator);)H()?i=p(r,i,o):i+=x("'")||x('"')?m():S(t.codeContinuation);return i&&r.push(new e.CodeText(i,o)),0===r.length&&w("not in embedded code",n),new e.EmbeddedCode(r)}function p(t,n,r){var i=L(),s=H();for(void 0===s&&w("not in parentheses"),n+=j,y();!R&&b(s);)x("'")||x('"')?n+=m():x("//")?n+=g():x("/*")?n+=v():x("<")||x("<!--")||x("@")?(n&&t.push(new e.CodeText(n,{line:r.line,col:r.col})),n="",t.push(o()),r.line=M,r.col=O):H()?n=p(t,n,r):(n+=j,y());return R&&w("unterminated parentheses",i),n+=j,y(),n}function m(){b("'")&&b('"')&&w("not in quoted string");var e,n;for(e=n=j,y();!R&&(b(e)||t.stringEscapedEnd.test(n));)n+=j,y();return R&&w("unterminated string"),n+=j,y(),n}function g(){b("//")&&w("not in code comment");for(var e="";!R&&b("\n");)e+=j,y();return R||(e+=j,y()),e}function v(){b("/*")&&w("not in code comment");for(var e="";!R&&b("*/");)e+=j,y();return R&&w("unterminated multi-line comment"),e+=j,y(),e}function y(){"\n"===j?(M++,O=0,P++):j&&(O+=j.length,P+=j.length),++A>=r.length?(R=!0,j=null):j=r[A]}function w(e,t){var n=t?" at line "+t.line+" col "+t.col+": ``"+r.join("").substr(t.pos,30).replace("\n","")+"''":"";throw new Error(e+n)}function x(e){return j===e}function b(e){return j!==e}function E(e){return e.test(j)}function C(e){return e.exec(j)}function T(){return!!E(t.ws)}function H(){return n[j]}function S(e){var t=C(e);return t&&(t=t[0])?(O+=t.length,P+=t.length,j=j.substring(t.length),""===j&&y(),t):null}function L(){return{line:M,col:O,pos:P}}function k(){return{TOK:j,i:A,EOF:R,LINE:M,COL:O}}function N(e){j=e.TOK,A=e.i,R=e.EOF,M=e.LINE,O=e.COL}var A=0,R=0===r.length,j=!R&&r[A],M=0,O=0,P=0;return i()}}),e("genCode",["AST","sourcemap"],function(e,t){function n(e,t,n){var r,i,o=[],u=[],c=[],a=n+"    ",l=a+"     ",f="";for(i=0;i<t.length;i++)r=t[i].genDirectives(e,l),r&&(o.push(i),c.push(s(t[i])),u.push(r));if(o.length){for(f+=".child(["+o.join(", ")+"], function (__) {"+a,i=0;i<u.length;i++)i&&(f+=a),f+="// "+c[i]+a,f+="__["+i+"]"+u[i]+";";f+=n+"})"}return f}function r(e,t,n,r){var i,o="";for(i=0;i<t.length;i++)i&&r&&(o+=r),o+=t[i][n](e,o);return o}function i(e){return"'"+e.replace(c.backslashes,"\\\\").replace(c.singleQuotes,"\\'").replace(c.newlines,"\\\n")+"'"}function o(e){var t=c.lastline.exec(e);return t=t?t[0]:"",t.replace(c.nonws," ")}function s(e){return u(e.beginTag||e.text||e.genHtml())}function u(e){var t=c.firstline.exec(e);return t?t[0]:""}var c={backslashes:/\\/g,newlines:/\n/g,singleQuotes:/'/g,firstline:/^[^\n]*/,lastline:/[^\n]*$/,nonws:/\S/g};e.CodeTopLevel.prototype.genCode=e.EmbeddedCode.prototype.genCode=function(e){return r(e,this.segments,"genCode")},e.CodeText.prototype.genCode=function(e){return(e.sourcemap?t.segmentStart(this.loc):"")+this.text+(e.sourcemap?t.segmentEnd():"")};var a=0;e.HtmlLiteral.prototype.genCode=function(e,t){var s=r(e,this.nodes,"genHtml"),u="\n"+o(t),c=this.nodes.length>1?n(e,this.nodes,u):this.nodes[0].genDirectives(e,u),l="new "+e.symbol+"("+a++ +","+u+i(s)+")";return c&&(l+=u+c+u),l="("+l+".node)"},e.HtmlElement.prototype.genHtml=function(e){return this.beginTag+r(e,this.content,"genHtml")+(this.endTag||"")},e.HtmlComment.prototype.genHtml=e.HtmlText.prototype.genHtml=function(){return this.text},e.HtmlInsert.prototype.genHtml=function(){return"<!-- insert -->"},e.HtmlElement.prototype.genDirectives=function(e,t){var i=n(e,this.content,t),o=r(e,this.properties,"genDirective",t),s=r(e,this.mixins,"genDirective",t);return i+(i&&(o||s)?t:"")+o+(o&&s?t:"")+s},e.HtmlComment.prototype.genDirectives=e.HtmlText.prototype.genDirectives=function(){return null},e.HtmlInsert.prototype.genDirectives=function(e){return".insert(function () { return "+this.code.genCode(e)+"; })"},e.Property.prototype.genDirective=function(e){var t=this.code.genCode(e);return".property(function (__) { __."+this.name+" = "+t+"; })"},e.Mixin.prototype.genDirective=function(e){return".mixin(function () { return "+this.code.genCode(e)+"; })"}}),e("shims",["AST"],function(e){function t(){var e=document.createElement("ul");return e.innerHTML="    <li></li>",2===e.childNodes.length}function n(){s(e.HtmlText,function(t){!c.ws.test(this.text)||t.parent instanceof e.HtmlAttr||(this.text="&#xfeff;"+this.text)})}function r(){var e=document.createElement("ul");return e.innerHTML="<!-- --><li></li>",2===e.childNodes.length}function i(){s(e.HtmlComment,function(t){0===t.index&&u(new e.HtmlText("&#xfeff;"),t)})}function o(e,t){for(var n={index:0,parent:e,sibings:t};n.index<t.length;n.index++)t[n.index].shim(n)}function s(e,t){a=!0;var n=e.prototype.shim;e.prototype.shim=function(e){t.call(this,e),n.call(this,e)}}function u(e,t){t.siblings.splice(t.index,0,e),e.shim(t),t.index++}if(!this||!this.document)return!1;var c={ws:/^\s*$/},a=!1;return e.CodeTopLevel.prototype.shim=function(e){o(this,this.segments,e)},e.HtmlLiteral.prototype.shim=function(e){o(this,this.nodes,e)},e.HtmlElement.prototype.shim=function(e){o(this,this.content,e)},e.HtmlInsert.prototype.shim=function(e){o(this,this.segments,e)},e.CodeText.prototype.shim=e.HtmlText.prototype.shim=e.HtmlComment.prototype.shim=function(){},t()||n(),r()||i(),a}),e("preprocess",["tokenize","parse","shims","sourcemap"],function(e,t,n,r){return function(i,o){o=o||{},o.symbol=o.symbol||"Html",o.sourcemap=o.sourcemap||null;var s=e(i,o),u=t(s,o);n&&u.shim();var c,a=u.genCode(o);return c="extract"===o.sourcemap?r.extractMap(a,i,o):"append"===o.sourcemap?r.appendMap(a,i,o):a}})}),function(e){var t={},n="Html";e(function(e,n,r){if(t.hasOwnProperty(e))throw new Error("define: cannot redefine module "+e);t[e]=r.apply(null,n.map(function(n){if(!t.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+e+" has not been defined.");return t[n]}))}),"object"==typeof module&&"object"==typeof module.exports?module.exports=t[n]:"function"==typeof define?define([],function(){return t[n]}):this[n]=t[n]}(function(e){"use strict";e("domlib",[],function(){function e(){var e=document.createElement("div");return e.innerHTML='<div contentEditable="true"></div>',e.children[0].isContentEditable===!0}function t(){n.isContentEditable=function(e){var t=e.getAttribute("contentEditable");return"true"===t||""===t}}var n={addEventListener:function(e,t,n){e.addEventListener(t,n,!1)},removeEventListener:function(e,t,n){e.removeEventListener(t,n)},classListContains:function(e,t){return e.classList.contains(t)},classListAdd:function(e,t){return e.classList.add(t)},classListRemove:function(e,t){return e.classList.remove(t)},isContentEditable:function(e){return e.isContentEditable},isAttachedToDocument:function(e){return 0===(1&document.compareDocumentPosition(e))}};return e()||t(),n}),e("parse",[],function(){function e(e){var r=t.exec(e),i=r&&n[r[1].toLowerCase()]||"div";return"svg"===i?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i)}var t=/<(\w+)/,n={li:"ul",td:"tr",th:"tr",tr:"tbody",thead:"table",tbody:"table",dd:"dl",dt:"dl",head:"html",body:"html",svg:"svg",g:"svg",circle:"svg",elipse:"svg",rect:"svg",text:"svg",polyline:"svg",polygon:"svg",line:"svg",path:"svg"};return function(t){var n,r,i=e(t);if(i.innerHTML=t,n=i.childNodes.length,0===n){if(""===t)return document.createTextNode("");throw new Error("HTML parse failed for: "+t)}if(1===n)return i.childNodes[0];for(r=document.createDocumentFragment();0!==i.childNodes.length;)r.appendChild(i.childNodes[0]);return r.startNode=r.firstChild,r.endNode=r.lastChild,r}}),e("cachedParse",["parse"],function(e){var t={},n=11;return function(r,i){var o,s=t[r];return void 0===s&&(s=e(i),t[r]=s),o=s.cloneNode(!0),o.nodeType===n&&(o.startNode=o.firstChild,o.endNode=o.lastChild),o}}),e("Html",["parse","cachedParse","domlib"],function(e,t,n){function r(n,r){void 0===n.nodeType&&(n=r?t(n,r):e(n)),this.node=n}return r.prototype={child:function i(e,t){var n,i,o=this.node.childNodes,s=e.length,u=new Array(s);if(void 0===o)throw new Error("Shell.childNodes can only be applied to a node with a \n.childNodes collection.  Node ``"+this.node+"'' does not have one. \nPerhaps you applied it to the wrong node?");for(n=0;s>n;n++){if(i=o[e[n]],!i)throw new Error("Node ``"+this.node+"'' does not have a child at index "+n+".");u[n]=new r(i)}return t(u),this},property:function(e){return e(this.node),this},mixin:function(e){return e()(this.node),this}},r.cleanup=function(){},r.domlib=n,r}),e("Html.insert",["Html"],function(e){var t=11,n=3;e.prototype.insert=function r(e){function r(){return function(t){if(l=t.parentNode,!l)throw new Error("@insert can only be used on a node that has a parent node. \nNode ``"+t+"'' is currently unattached to a parent.");if(f.parentNode!==l)throw new Error("@insert requires that the inserted nodes remain sibilings \nof the original node.  The DOM has been modified such that this is \nno longer the case.");d=f,i(e()),u(d,t)}}function i(e){var r=d.nextSibling;null===e||void 0===e||(e.nodeType===t?0===e.childNodes.length&&e.startNode&&e.endNode?s(e.startNode,e.endNode):(l.insertBefore(e,r),d=r.previousSibling):e.nodeType?(r!==e&&(r.nextSibling===e&&r!==e.nextSibling?l.removeChild(r):l.insertBefore(e,r)),d=e):Array.isArray(e)?o(e):(e=e.toString(),r.nodeType!==n?d=l.insertBefore(document.createTextNode(e),r):(r.data!==e&&(r.data=e),d=r)))}function o(e){var t,n,r;for(t=0,n=e.length;n>t;t++)i(e[t]),r&&3==r.nodeType&&r.nextSibling!==a&&3===r.nextSibling.nodeType&&l.insertBefore(document.createTextNode(" "),r.nextSibling),r=a.previousSibling}function s(e,t){var n,r=d.nextSibling;if(e.parentNode!==t.parentNode)throw new Error("Range must be siblings");do{if(n=e,e=e.nextSibling,!n)throw new Error("end must come after head");n!==r?l.insertBefore(n,r):r=r.nextSibling}while(n!==t);d=t}function u(e,t){if(e!==t)for(var n=e.nextSibling;n!==t;)l.removeChild(n),n=e.nextSibling}function c(e){return l.insertBefore(document.createTextNode(""),e)}var a=this.node,l=a.parentNode,f=c(a),d=f;return this.mixin(r)}}),e("Html.attr",["Html"],function(e){e.attr=function(e,t){return function(n){n.setAttribute(e,t)}}}),e("Html.class",["Html"],function(e){e["class"]=function(t,n,r){return arguments.length<3&&(r=n,n=null),function(i,o){if(void 0===i.className)throw new Error("@class can only be applied to an element that accepts class names. \nElement ``"+i+"'' does not. Perhaps you applied it to the wrong node?");if(r===o)return o;var s=e.domlib.classListContains(i,t),u=n&&e.domlib.classListContains(i,n);return r?(s||e.domlib.classListAdd(i,t),n&&u&&e.domlib.classListRemove(i,n)):(s&&e.domlib.classListRemove(i,t),n&&!u&&e.domlib.classListAdd(i,n)),r}}}),e("Html.focus",["Html"],function(e){function t(){o=!1;var t,s,u=0>r?n.textContent.length+r+1:r,c=0>i?n.textContent.length+i+1:i;n.focus(),isNaN(u)||(n.setSelectionRange?n.setSelectionRange(u,c):n.createTextRange?(t=n.createTextRange(),t.moveEnd("character",c),t.moveStart("character",u),t.select()):e.domlib.isContentEditable(n)&&n.childNodes.length>0&&(t=document.createRange(),t.setStart(n.childNodes[0],u),t.setEnd(n.childNodes[0],c),s=window.getSelection(),s.removeAllRanges(),s.addRange(t)))}var n=null,r=0/0,i=0/0,o=!1;e.focus=function(e,s,u){return s=arguments.length>1?s:0/0,u=arguments.length>2?u:s,function(c){if(!c.focus)throw new Error("@focus can only be applied to an element that has a .focus() method, like <input>, <select>, <textarea>, etc.");e?(n=c,r=s,i=u,o||window.requestAnimationFrame(t)):c.blur()}}}),e("Html.onkey",["Html"],function(e){e.onkey=function(n,r,i){function o(e){return e.keyCode!==u||c&&!e[c]||i(e),!0}arguments.length<3&&(i=r,r="down");var s=n.toLowerCase().split("-",2),u=t[s[s.length-1]],c=s.length>1?s[0]+"Key":null;if(void 0===u)throw new Error("@Html.onkey: unrecognized key identifier '"+n+"'");if("function"!=typeof i)throw new Error("@Html.onkey: must supply a function to call when the key is entered");return function(t){e.domlib.addEventListener(t,"key"+r,o),e.cleanup(t,function(){e.domlib.removeEventListener(t,"key"+r,o)})}};var t={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capslock:20,esc:27,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,prntscrn:44,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,winkey:91,winmenu:93,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,",":188,"<":188,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222}})}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,Html)}(function(e,t){"use strict";t.prototype.mixin=function(t){var n,r=this.node;return e(function(){n=t()(r,n)}),this},t.prototype.property=function(t){var n=this.node;return e(function(){t(n)}),this},t.cleanup=function(t,n){e.cleanup(n)},t.data=function(n,r,i){return function(o){function s(){function i(){var t=e.peek(n),r=o.value;return t.toString()!==r&&n(r),!0}var s=r||"change";e(function(){o.value=n()}),t.domlib.addEventListener(o,s,i),e.cleanup(function(){t.domlib.removeEventListener(o,s,i)})}function u(){function s(){return n(o.checked?u:c),!0}var u=void 0===r?!0:r,c=void 0===i?u===!0?!1:null:i;e(function(){o.checked=n()===u}),t.domlib.addEventListener(o,"change",s),e.cleanup(function(){t.domlib.removeEventListener(o,"change",s)})}function c(){function i(){return o.checked&&n(s),!0}var s=void 0===r?!0:r;e(function(){o.checked=n()===s}),t.domlib.addEventListener(o,"change",i),e.cleanup(function(){t.domlib.removeEventListener(o,"change",i)})}function a(){function i(){var t=e.peek(n),r=o.textContent;return t.toString()!==r&&n(r),!0}var s=r||"input";e(function(){o.textContent=n()}),t.domlib.addEventListener(o,s,i),e.cleanup(function(){t.domlib.removeEventListener(o,s,i)})}var l=o.nodeName,f=o.type&&o.type.toUpperCase(),d="INPUT"===l?"TEXT"===f?s:"RADIO"===f?c:"CHECKBOX"===f?u:null:"TEXTAREA"===l?s:"SELECT"===l?s:t.domlib.isContentEditable(o)?a:null;if(!d)throw new Error("@data can only be applied to a form control element, \nsuch as <input/>, <textarea/> or <select/>, or to an element with 'contentEditable' set.  Element ``"+l+"'' is \nnot such an element.  Perhaps you applied it to the wrong node?");return d()}}}),function(e){"object"==typeof exports?e(require("S"),require("htmlliterals-runtime")):"function"==typeof define?define(["S","htmlliterals-runtime"],e):e(S,htmlliterals)}(function(e,t){function n(){for(var t,n;t=document.querySelector("script[type='"+s+"']");)t.type+="-processed",n=t.src?i(t.src):e.data(t.textContent||t.innerText||t.innerHTML),a.push(new o(t,n))}function r(e){var n=t.preprocess(e.source(),u),r=document.createElement("script"),i=e.el.parentNode,o=e.el.nextSibling;r.type="text/javascript",r.src="data:text/javascript;charset=utf-8,"+escape(n),r.async=e.el.async,r.defer=e.el.defer,o?i.insertBefore(r,o):i.appendNode(r)}function i(t){var n=e.data(void 0),r=new window.XMLHttpRequest;return r.open("GET",t,!0),r.onreadystatechange=function(){if(r.readyState===c){if(r.status<200||r.status>=300)throw new Error("surplus.js: error fetching file:"+t);n(r.responseText)}},r.send(),n}function o(e,t){this.el=e,this.source=t}var s="text/javascript-htmlliterals",u=window.surplus||{},c=4,a=e.array([]),l=0;e(function(){for(;l<a().length&&void 0!==a()[l].source();l++)r(a()[l])}),n()});